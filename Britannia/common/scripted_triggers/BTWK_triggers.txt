
### BRITANNIA CUSTOM SCRIPTED TRIGGERS ###

is_roman_ruler_trigger = {
	OR = {
		culture_group = imperiale
		has_landed_title = e_gaul
		has_landed_title = e_roman_britannia
		primary_title = {
			#custom_tooltip = {
				#text = is_roman_province_tooltip
				has_title_flag = roman_province
			#}
		}
		hidden_tooltip = {
			in_revolt = yes
			liege_before_war = {
				OR = {
					culture_group = imperiale
					has_landed_title = e_gaul
					has_landed_title = e_roman_britannia
					any_demesne_title = {
						has_title_flag = roman_province
					}
				}
			}
		}
	}
	NAND = {
		primary_title = { title = k_praetorian_prefecture_of_gaul }
		k_praetorian_prefecture_of_gaul = { NOT = { has_title_flag = roman_province } }
	}
}

is_roman_legion_title_trigger = {
	OR = {
		title = d_legio_vi_gallicana
		title = d_legio_vi_victrix
		title = d_legio_xx_valeria_victrix
		title = d_legio_ii_augusta
		title = d_legio_ii_britannica
		title = d_legio_i_flavia_gallicana_constantia
		title = d_legio_i_flavia_martis
		title = d_legio_i_minervia
		title = d_legio_xxx_ulpia_victrix
		title = d_legio_xii_victrix
		title = d_classis_britannica
	}
}

is_legionary_base_province_trigger = {
	OR = {
		d_legio_vi_gallicana = {
			capital_scope = {
				province = PREVPREV
			}
			FROM = {
				top_liege = { any_vassal = { has_landed_title = PREVPREVPREV } }
			}
		}
		d_legio_vi_victrix = {
			capital_scope = {
				province = PREVPREV
			}
			FROM = {
				top_liege = { any_vassal = { has_landed_title = PREVPREVPREV } }
			}
		}
		d_legio_xx_valeria_victrix = {
			capital_scope = {
				province = PREVPREV
			}
			FROM = {
				top_liege = { any_vassal = { has_landed_title = PREVPREVPREV } }
			}
		}
		d_legio_ii_augusta = {
			capital_scope = {
				province = PREVPREV
			}
			FROM = {
				top_liege = { any_vassal = { has_landed_title = PREVPREVPREV } }
			}
		}
		d_legio_ii_britannica = {
			capital_scope = {
				province = PREVPREV
			}
			FROM = {
				top_liege = { any_vassal = { has_landed_title = PREVPREVPREV } }
			}
		}
		d_legio_i_flavia_gallicana_constantia = {
			capital_scope = {
				province = PREVPREV
			}
			FROM = {
				top_liege = { any_vassal = { has_landed_title = PREVPREVPREV } }
			}
		}
		d_legio_i_flavia_martis = {
			capital_scope = {
				province = PREVPREV
			}
			FROM = {
				top_liege = { any_vassal = { has_landed_title = PREVPREVPREV } }
			}
		}
		d_legio_i_minervia = {
			capital_scope = {
				province = PREVPREV
			}
			FROM = {
				top_liege = { any_vassal = { has_landed_title = PREVPREVPREV } }
			}
		}
		d_legio_xxx_ulpia_victrix = {
			capital_scope = {
				province = PREVPREV
			}
			FROM = {
				top_liege = { any_vassal = { has_landed_title = PREVPREVPREV } }
			}
		}
		d_legio_xii_victrix = {
			capital_scope = {
				province = PREVPREV
			}
			FROM = {
				top_liege = { any_vassal = { has_landed_title = PREVPREVPREV } }
			}
		}
		d_classis_britannica = {
			capital_scope = {
				province = PREVPREV
			}
			FROM = {
				top_liege = { any_vassal = { has_landed_title = PREVPREVPREV } }
			}
		}
	}
}

is_british_province_title_trigger = {
	OR = {
		title = k_maxima_cesariensis
		title = k_flavia_cesariensis
		title = k_britannia_prima
		title = k_britannia_secunda
		title = k_valentia
		title = k_romancaledonia
		title = k_hibernia_prima
		title = k_hibernia_secunda
	}
}

is_gallic_province_title_trigger = {
	has_title_flag = gallic_province
}

is_roman_emperor_trigger = {
	OR = {
		has_landed_title = e_gaul
		has_landed_title = e_roman_britannia
		has_landed_title = e_western_roman_empire
		has_landed_title = e_eastern_roman_empire
	}
}

is_roman_empire_title_trigger = {
	OR = {
		title = e_gaul
		title = e_roman_britannia
		title = e_western_roman_empire
		title = e_eastern_roman_empire
	}
}

is_brythonic_culture_trigger = {
	OR = {
		culture = briton
		culture = romanobritish
		culture = cumbrian
		culture = armorican
		culture = breton
	}
}

is_HK_britannia_relevant_trigger = {
	OR = {
		is_brythonic_culture_trigger = yes
		capital_scope = {
			region = world_britannia
		}
		any_demesne_title = {
			empire = {
				title = e_britannia
			}
		}
	}
}

is_HK_aengland_relevant_trigger = {
	OR = {
		culture = anglosaxon
		capital_scope = {
			region = world_britannia
		}
		any_demesne_title = {
			empire = {
				title = e_aengland
			}
		}
	}
}

is_gaelic_culture_trigger = {
	OR = {
		culture = oldirish
		culture = gaelic
	}
}

is_roman_culture_trigger = {
	OR = {
		culture_group = imperiale
		culture = romanobritish
	}
}

is_romanogallic_area_trigger = {
	region = world_gaul
	OR = {
		NOR = { 
			region = world_gaul_romangermania 
			region = world_gaul_aquitania_tertia
		}
		region = world_gaul_maxima_sequanorum
	}
}

is_romanobritish_area_trigger = {
	OR = {
		region = world_britannia
		region = world_caledonia
		region = world_ireland 
	}
}

is_romanogermanic_area_trigger = {
	OR = {
		region = world_gaul_romangermania 
		region = world_germania 
	}
	NOT = { region = world_gaul_maxima_sequanorum }
	NAND = {
		region = world_germania_jutland
		has_global_flag = jutland_conquered_norse
	}
	NAND = {
		region = world_germania_angeln
		has_global_flag = angeln_conquered_norse
	}
}

is_romanoscandian_area_trigger = {
	region = custom_scandinavia 
	OR = {
		NOT = { region = world_germania_jutland }
		has_global_flag = jutland_conquered_norse
	}
	OR = {
		NOT = { region = world_germania_angeln }
		has_global_flag = angeln_conquered_norse
	}
}

is_romanoaquitanian_area_trigger = {
	region = world_gaul_aquitania_tertia
}

is_local_roman_culture_trigger = {
	OR = {
		AND = {
			is_romanogallic_area_trigger = yes
			culture = romanogallic
		}
		AND = { 
			is_romanobritish_area_trigger = yes
			culture = romanobritish
		}
		AND = { 
			is_romanogermanic_area_trigger = yes
			culture = romanogermanic
		}
		AND = { 
			is_romanoscandian_area_trigger = yes
			culture = romanoscandian
		}
		AND = { 
			is_romanoaquitanian_area_trigger = yes
			culture = romanoaquitanian
		}
	}
}

is_semiromanized_nongermanic_culture_trigger = {
	OR = {
		culture = briton
		culture = cumbrian
		culture = armorican
		culture = breton
		culture = vasconian
		culture = alan
		culture = numidian
		culture = hebrew
	}
}

is_semiromanized_germanic_culture_trigger = {
	OR = {
		culture = oldfrankish
		culture = frankish
		culture = dutch
		culture = franconian
		culture = oldalemannic
		culture = alemannic
		culture = oldbavarian
		culture = bavarian
		culture = french		# Not actually Germanic, but treated as such for these purposes
		culture = occitan
		culture = arpitan
	}
}

is_ingvaeonic_culture_trigger = {
	OR = {
		culture = angle
		culture = oldsaxon
		culture = jute
		culture = oldfrisian
		culture = anglosaxon
		culture = frisian
		culture = saxon
	}
}

is_istvaeonic_culture_trigger = {
	OR = {
		culture = oldfrankish
		culture = frankish
		culture = dutch
		culture = franconian
	}
}

is_irminonic_culture_trigger = {
	OR = {
		culture = oldthuringian
		culture = thuringian
		culture = oldalemannic
		culture = alemannic
		culture = oldbavarian
		culture = bavarian
		culture = suebic
	}
}

is_east_germanic_trigger = {
	OR = {
		culture = visigoth
		culture = burgundian
		culture = ostrogoth
		culture = vandal
		culture = taifal
	}
}

is_north_germanic_trigger = {
	OR = {
		culture = proto_norse
		culture = dane
		hidden_tooltip = {
			culture = norse_gael
		}
	}
}

is_romanized_germanic_trigger = {
	OR = {
		culture = visigoth
		culture = burgundian
		culture = ostrogoth
		culture = vandal
		culture = taifal
		culture = suebic
	}
}

is_frankish_culture_trigger = {
	OR = {
		is_istvaeonic_culture_trigger = yes
		culture = french
		culture = occitan
		culture = arpitan
	}
}

is_alemannic_culture_trigger = {
	OR = {
		culture = oldalemannic
		culture = alemannic
	}
}

is_roman_pagan_culture_trigger = {
	OR = {
		culture_group = imperiale
		culture_group = romance
	}	
}	

is_gallo_romance_culture_trigger = {
	OR = {
		culture = french
		culture = occitan
		culture = arpitan
	}
}

cannot_create_roman_title_trigger = {
	OR = {
		AND = {
			culture_group = germanic
			NOT = { is_romanized_germanic_trigger = yes }
		}
		culture = french
		culture = occitan
		culture = arpitan
	}
}

can_create_roman_province_gaul_trigger = {
	conditional_tooltip = {
		trigger = {
			NOT = { has_global_flag = romanized_germanic_empire_formed }
		}
		OR = {
			culture_group = imperiale
			culture = romanobritish
		}
	}
	conditional_tooltip = {
		trigger = {
			has_global_flag = romanized_germanic_empire_formed
		}
		OR = {
			culture_group = imperiale
			culture = romanobritish
			top_liege = { has_landed_title = e_visigoths }
		}
	}
	conditional_tooltip = {
		trigger = {
			has_landed_title = k_praetorian_prefecture_of_gaul
		}
		NOT = { has_landed_title = k_praetorian_prefecture_of_gaul }
	}
	custom_tooltip = {
		text = roman_provinces_gaul_restored_tooltip
		has_global_flag = roman_provinces_gaul_restored
	}
	conditional_tooltip = {
		trigger = {
			top_liege = { 
				OR = {
					has_landed_title = e_franks 
					has_landed_title = e_germania 
					primary_title = {
						tier = KING
						OR = {
							empire = { title = e_franks }
							empire = { title = e_germania }
						}
					}
				}
			}
		}
		top_liege = { 
			NOR = {
				has_landed_title = e_franks 
				has_landed_title = e_germania 
				primary_title = {
					tier = KING
					OR = {
						empire = { title = e_franks }
						empire = { title = e_germania }
					}
				}
			}
		}
	}
	conditional_tooltip = {
		trigger = {
			NOT = { num_of_count_titles_in_realm = 8 }
		}
		num_of_count_titles_in_realm = 8
	}
}

can_create_germanic_title_trigger = {
	OR = {
		culture_group = germanic
		culture = french
		culture = occitan
		culture = arpitan
	}
	NOT = { is_romanized_germanic_trigger = yes }
	top_liege = {
		OR = {
			culture_group = germanic
			culture = french
			culture = occitan
			culture = arpitan
		}
		NOT = { is_romanized_germanic_trigger = yes }
	}
}

can_create_brythonic_only_title_trigger = {		# Really means not for Romans or non-Romanized Germanics
	top_liege = {
		is_roman_ruler_trigger = no
	}
	cannot_create_roman_title_trigger = no
}

cannot_be_created_by_romans_trigger = {
	top_liege = {
		is_roman_ruler_trigger = no
	}
}

briton_king_roman_province_creation_block_trigger = {
	conditional_tooltip = {
		trigger = {
			NOR = {
				is_roman_emperor_trigger = yes
				top_liege = { is_roman_emperor_trigger = yes }
				any_demesne_title = {
					has_title_flag = roman_province
				}
				top_liege = {
					any_demesne_title = {
						has_title_flag = roman_province
					}
				}
				has_global_flag = offa_dyke_created
			}
		}
		top_liege = {
			custom_tooltip = {
				text = briton_king_roman_province_creation_block_trigger_tooltip
				hidden_tooltip = {
					NOT = {
						any_demesne_title = {
							higher_tier_than = DUKE
							OR = {
								title = e_britannia
								title = e_cymru
								title = e_hen_ogledd
								empire = {
									OR = {
										title = e_britannia
										title = e_cymru
										title = e_hen_ogledd
									}
								}
							}
						}
					}
				}
			}
		}
	}
}

is_germanic_controlled_trigger = {
	holder_scope = {
		top_liege = { 
			OR = {
				AND = {
					culture_group = germanic
					is_romanized_germanic_trigger = no
				}
				culture = french
				culture = occitan
				culture = arpitan
				primary_title = {
					tier = KING
					empire = { title = e_franks }
				}
				liege_before_war = { 
					OR = {
						AND = {
							culture_group = germanic
							is_romanized_germanic_trigger = no
						}
						culture = french
						culture = occitan
						culture = arpitan
						primary_title = {
							tier = KING
							empire = { title = e_franks }
						}
					}
				}
			}
		}
	}
}

is_celtic_controlled_trigger = {
	holder_scope = {
		top_liege = { 
			culture_group = celtic
			is_roman_ruler_trigger = no
		}
	}
}

is_norse_controlled_trigger = {
	holder_scope = {
		top_liege = { 
			is_north_germanic_trigger = yes
		}
	}
}

is_celtic_pagan_trigger = {
	OR = {
		religion_openly_briton_or_reformed_trigger = yes
		religion_openly_pict_or_reformed_trigger = yes
		religion_openly_gael_or_reformed_trigger = yes
	}
}

is_reformed_celtic_pagan_trigger = {
	OR = {
		religion = briton_pagan_reformed
		religion = pict_pagan_reformed
		religion = gael_pagan_reformed
	}
}

is_unreformed_celtic_pagan_trigger = {
	OR = {
		religion = briton_pagan
		religion = pict_pagan
		religion = gael_pagan
	}
}

is_germanic_pagan_trigger = {
	OR = {
		religion_openly_norse_or_reformed_trigger = yes
		religion_openly_germanic_or_reformed_trigger = yes
		religion_openly_frankish_or_reformed_trigger = yes
		religion_openly_suebic_or_reformed_trigger = yes
		religion_openly_gothic_or_reformed_trigger = yes
	}
}

is_reformed_germanic_pagan_trigger = {
	OR = {
		religion = norse_pagan_reformed
		religion = germanic_pagan_reformed
		religion = frankish_pagan_reformed
		religion = suebic_pagan_reformed
		religion = gothic_pagan_reformed
	}
}

is_unreformed_germanic_pagan_trigger = {
	OR = {
		religion = norse_pagan
		religion = germanic_pagan
		religion = frankish_pagan
		religion = suebic_pagan
		religion = gothic_pagan
	}
}

is_catholic_heresy_trigger = {
	OR = {
		religion = pelagian
		religion = nestorian
		religion = priscillian
	}
}

is_gnostic_religion_trigger = {
	OR = {
		religion = manichean
		religion = gnostic
		religion = priscillian
	}
}

is_roman_pagan_or_reformed_trigger = {
	OR = {
		religion = roman_pagan
		religion = roman_pagan_reformed
		# religion = sol_invictus
	}
}

is_hellenic_group_religion_trigger = {
	OR = {
		religion = roman_pagan
		religion = roman_pagan_reformed
		# religion = sol_invictus
		religion = titan_pagan
		religion = promethean_pagan
	}
}

is_secretly_hellenic_group_religion_trigger = {
	OR = {
		secret_religion = roman_pagan
		secret_religion = roman_pagan_reformed
		# secret_religion = sol_invictus
		secret_religion = titan_pagan
		secret_religion = promethean_pagan
	}
}

true_religion_hellenic_group_trigger = {
	OR = {
		true_religion = roman_pagan
		true_religion = roman_pagan_reformed
		# true_religion = sol_invictus
		true_religion = titan_pagan
		true_religion = promethean_pagan
	}
}

has_theocratic_religion_head_trigger = {
	OR = {
		AND = {
			OR = {
				religion = alan_pagan_reformed
				religion = tengri_pagan_reformed
				religion = vasconic_pagan_reformed
			}
			has_religion_features = no # Old saves, and campaigns without HF, need the Fylkirate to continue working
		}
		AND = {
			has_religion_features = yes
			religion_group = pagan_group
			is_reformed_religion = yes
			NOR = { 
				has_religion_feature = religion_temporal_head 
				has_religion_feature = religion_druidic_leadership
			}
		}
		religion = britannic_pagan
		religion_group = christian
		religion_group = gnostic_group
		# religion = sol_invictus
	}
}

is_jewish_settlement_region_trigger = {
	region = world_gaul
}

is_catholic_spread_blocked_trigger = {
	OR = {
		AND = {
			culture = proto_norse
			NOT = { year = 700 }
		}
		AND = {
			culture_group = germanic
			NOT = { year = 650 }
			region = world_germania
			NOR = { 
				region = world_germania_saxony_westphalia
				region = world_hamaland_salland
				region = world_bructeria
				region = custom_frisia 
			}
		}
	}
	NOR = {
		owner = {
			OR = {
				religion = catholic
				any_liege = {
					religion = catholic
				}
			}
		}
		any_neighbor_province = {
			OR = {	
				religion = catholic
				owner = {
					OR = {
						religion = catholic
						any_liege = {
							religion = catholic
						}
					}
				}
			}
		}
	}
}

is_isolated_island_trigger = {
	OR = {
		region = world_britannia_cymry_henogledd_ynysmanaw
		region = world_outer_hebrides
		region = world_shetland
		region = world_lyonesse
		region = world_gotland
	}
}

is_in_british_isles_trigger = {
	OR = {
		region = world_britannia
		region = world_caledonia
		region = world_ireland
	}
}

is_romanized_government_trigger = {
	OR = {
		government = sub_roman_government
		government = sub_roman_brythonic_government
		government = imperial_government
	}
}

is_romanized_or_germanic_government_trigger = {
	OR = {
		government = sub_roman_government
		government = sub_roman_brythonic_government
		government = imperial_government
		government = germanic_government
	}
}

is_wrong_pagan_religion_trigger = {
	NOT = { has_religion_feature = religion_proselytizing }
	OR = {
		AND = {
			is_brythonic_culture_trigger = yes
			NOR = {
				religion = briton_pagan 
				religion = briton_pagan_reformed
				religion = britannic_pagan
			}
		}
		AND = {
			culture = pictish
			NOR = {
				religion = pict_pagan
				religion = pict_pagan_reformed
			}
		}			
		AND = {
			is_gaelic_culture_trigger = yes
			NOR = { 			
				religion = gael_pagan
				religion = gael_pagan_reformed
			}
		}
		AND = {
			is_north_germanic_trigger = yes
			NOR = {		
				religion = norse_pagan
				religion = norse_pagan_reformed
			}
		}
		AND = {
			is_ingvaeonic_culture_trigger = yes
			NOR = {		
				religion = germanic_pagan
				religion = germanic_pagan_reformed
			}
		}
		AND = {
			is_istvaeonic_culture_trigger = yes
			NOR = {		
				religion = frankish_pagan
				religion = frankish_pagan_reformed
			}
		}
		AND = {
			is_irminonic_culture_trigger = yes
			NOR = {		
				religion = suebic_pagan
				religion = suebic_pagan_reformed
			}
		}
		AND = {
			is_east_germanic_trigger = yes
			NOR = {		
				religion = gothic_pagan
				religion = gothic_pagan_reformed
			}
		}
		is_roman_pagan_culture_trigger = yes
		AND = {
			culture_group = sarmatian
			NOR = {		
				religion = alan_pagan 
				religion = alan_pagan_reformed
			}
		}
		AND = {
			culture_group = altaic
			NOR = {		
				religion = tengri_pagan 
				religion = tengri_pagan_reformed
			}
		}
		AND = {
			culture_group = basque
			NOR = {		
				religion = vasconic_pagan 
				religion = vasconic_pagan_reformed
			}
		}
		culture_group = israelite
	}
}

is_wrong_secret_pagan_religion_trigger = {
	NOT = { secret_religion_scope = { has_religion_feature = religion_proselytizing } }
	OR = {
		AND = {
			is_brythonic_culture_trigger = yes
			NOR = {
				secret_religion = briton_pagan 
				secret_religion = briton_pagan_reformed
				secret_religion = britannic_pagan
			}
		}
		AND = {
			culture = pictish
			NOR = {
				secret_religion = pict_pagan
				secret_religion = pict_pagan_reformed
			}
		}			
		AND = {
			is_gaelic_culture_trigger = yes
			NOR = { 			
				secret_religion = gael_pagan
				secret_religion = gael_pagan_reformed
			}
		}
		AND = {
			is_north_germanic_trigger = yes
			NOR = {		
				secret_religion = norse_pagan
				secret_religion = norse_pagan_reformed
			}
		}
		AND = {
			is_ingvaeonic_culture_trigger = yes
			NOR = {		
				secret_religion = germanic_pagan
				secret_religion = germanic_pagan_reformed
			}
		}
		AND = {
			is_istvaeonic_culture_trigger = yes
			NOR = {		
				secret_religion = frankish_pagan
				secret_religion = frankish_pagan_reformed
			}
		}
		AND = {
			is_irminonic_culture_trigger = yes
			NOR = {		
				secret_religion = suebic_pagan
				secret_religion = suebic_pagan_reformed
			}
		}
		AND = {
			is_east_germanic_trigger = yes
			NOR = {		
				secret_religion = gothic_pagan
				secret_religion = gothic_pagan_reformed
			}
		}
		is_roman_pagan_culture_trigger = yes
		AND = {
			culture_group = sarmatian
			NOR = {		
				secret_religion = alan_pagan 
				secret_religion = alan_pagan_reformed
			}
		}
		AND = {
			culture_group = altaic
			NOR = {		
				secret_religion = tengri_pagan 
				secret_religion = tengri_pagan_reformed
			}
		}
		AND = {
			culture_group = basque
			NOR = {		
				secret_religion = vasconic_pagan 
				secret_religion = vasconic_pagan_reformed
			}
		}
		culture_group = israelite
	}
}

is_same_default_pagan_religion_as_ROOT = {
	OR = {
		AND = {
			is_brythonic_culture_trigger = yes
			ROOT = { is_brythonic_culture_trigger = yes }
		}
		AND = {
			culture = pictish
			ROOT = { culture = pictish }
		}			
		AND = {
			is_gaelic_culture_trigger = yes
			ROOT = { is_gaelic_culture_trigger = yes }
		}
		AND = {
			is_north_germanic_trigger = yes
			ROOT = { is_north_germanic_trigger = yes }
		}
		AND = {
			is_ingvaeonic_culture_trigger = yes
			ROOT = { is_ingvaeonic_culture_trigger = yes }
		}
		AND = {
			is_istvaeonic_culture_trigger = yes
			ROOT = { is_istvaeonic_culture_trigger = yes }
		}
		AND = {
			is_irminonic_culture_trigger = yes
			ROOT = { is_irminonic_culture_trigger = yes }
		}
		AND = {
			is_east_germanic_trigger = yes
			ROOT = { is_east_germanic_trigger = yes }
		}
		AND = {
			is_roman_pagan_culture_trigger = yes
			ROOT = { is_roman_pagan_culture_trigger = yes }
		}
		AND = {
			culture_group = sarmatian
			ROOT = { culture_group = sarmatian }
		}
		AND = {
			culture_group = altaic
			ROOT = { culture_group = altaic }
		}
		AND = {
			culture_group = basque
			ROOT = { culture_group = basque }
		}
		AND = {
			culture_group = israelite
			ROOT = { culture_group = israelite }
		}
	}
}

can_conquer_anglosaxon_trigger = {		# Assumes ROOT is independent
	holder_scope = {
		top_liege = {
			NOR = {
				character = ROOT
				reverse_has_truce = ROOT
				is_ingvaeonic_culture_trigger = yes
			}
		}
	}
	location = {
		any_neighbor_province = {
			owner = {
				OR = {
					character = ROOT
					is_liege_or_above = ROOT
				}
			}
		}
	}
}

has_truce_with_owner_trigger = {		# Assumes ROOT is independent
	holder_scope = {
		top_liege = {
			reverse_has_truce = ROOT
		}
	}
}

is_ROOT_liege_or_above_title_trigger = {
	holder_scope = {
		OR = {
			character = ROOT
			is_liege_or_above = ROOT
		}
	}
}

is_normal_seasons_trigger = {
	OR = {
		NOT = { has_global_flag = late_antique_little_ice_age_started }
		AND = {
			has_global_flag = late_antique_little_ice_age_ended
			NOT = { has_global_flag = medieval_warm_period_started }
		}
	}
}

has_tribal_modifier = {
	OR = {
		has_character_modifier = tribal_modifier_0
		has_character_modifier = tribal_modifier_1
		has_character_modifier = tribal_modifier_2
		has_character_modifier = tribal_modifier_3
		has_character_modifier = tribal_modifier_4
		has_character_modifier = tribal_modifier_5
		has_character_modifier = tribal_modifier_6
		has_character_modifier = tribal_modifier_7
		has_character_modifier = tribal_modifier_8
		has_character_modifier = tribal_modifier_9
		has_character_modifier = tribal_modifier_10
		has_character_modifier = tribal_modifier_11
		has_character_modifier = tribal_modifier_12
		has_character_modifier = tribal_modifier_13
		has_character_modifier = tribal_modifier_14
		has_character_modifier = tribal_modifier_15
		has_character_modifier = tribal_modifier_16
		has_character_modifier = tribal_modifier_17
		has_character_modifier = tribal_modifier_18
		has_character_modifier = tribal_modifier_19
		has_character_modifier = tribal_modifier_20
		has_character_modifier = tribal_modifier_-1
		has_character_modifier = tribal_modifier_-2
		has_character_modifier = tribal_modifier_-3
		has_character_modifier = tribal_modifier_-4
		has_character_modifier = tribal_modifier_-5
		has_character_modifier = tribal_modifier_-6
		has_character_modifier = tribal_modifier_-7
		has_character_modifier = tribal_modifier_-8
		has_character_modifier = tribal_modifier_-9
		has_character_modifier = tribal_modifier_-10
		has_character_modifier = tribal_modifier_-11
		has_character_modifier = tribal_modifier_-12
		has_character_modifier = tribal_modifier_-13
		has_character_modifier = tribal_modifier_-14
		has_character_modifier = tribal_modifier_-15
	}
}

frankish_invasion_gaul_event_trigger_with_neighbour_condition = {
	year = 475
	NOT = { year = 510 }
	is_frankish_culture_trigger = yes
	OR = {
		has_landed_title = k_franks
		has_landed_title = k_ripuarian_franks
	}
	k_gaul = {
		holder_scope = {
			is_frankish_culture_trigger = no
			NOR = {
				reverse_has_truce = ROOT
				has_non_aggression_pact_with = ROOT
			}
		}
	}
	NOT = { has_global_flag = neustria_created }
	NOT = { 
		ROOT = { 
			has_character_modifier = friendly_with_romans 
		} 
	}
	OR = {
		year = 500
		has_global_flag = frankish_kingdoms_united
	}
	OR = {
		NOT = { has_global_flag = frankish_war_480 }
		had_global_flag = { flag = frankish_war_480 days = 2555 }
	}	
}

is_angeln_migration_province_trigger = {
	owner = {
		top_liege = {
			OR = {
				has_landed_title = k_angeln
				AND = {
					has_landed_title = d_angeln
					k_angeln = { has_holder = no }
				}
				AND = {
					ai = yes
					culture = angle
					capital_scope = {
						OR = {
							region = world_germania_jutland
							region = world_germania_angeln
						}
					}
				}
			}
		}
	}
}

# For landless titles that aren't religious heads, mercenaries, etc. - normal but offmap titles
is_landless_normal_title_trigger = {
	OR = {
		title = e_western_roman_empire
		title = e_eastern_roman_empire
		title = k_ostrogoths
	}
}

is_gothic_controlled_trigger = {
	holder_scope = {
		top_liege = {
			OR = {
				is_gothic_ruler_trigger = yes
				AND = {
					in_revolt = yes
					liege_before_war = {
						is_gothic_ruler_trigger = yes
					}
				}
			}
		}
	}
}

is_gothic_ruler_trigger = {
	OR = {
		culture = visigoth
		culture = ostrogoth
		has_landed_title = k_visigoths
		has_landed_title = k_ostrogoths
		AND = {
			has_landed_title = e_visigoths
			OR = {
				e_visigoths = { has_title_flag = empire_claimed_visigoths }
				e_visigoths = { has_title_flag = empire_claimed_ostrogoths }
			}
		}				
	}
}

is_from_and_this_top_liege_roman_province_trigger = {
	top_liege = {
		is_tributary = { type = roman_province }
		suzerain = {
			FROM = { 
				is_tributary = { 
					type = roman_province 
					suzerain = PREV
				} 
			}
		}
	}
}

# Checks if FROM is a client state, foederate, or province of the same suzerain as your top liege
shares_same_permanent_suzerain_with_from_trigger = {
	FROM = {
		OR = {
			is_tributary = { type = client_state }
			is_tributary = { type = foederati }
			is_tributary = { type = roman_province }
			AND = {
				in_revolt = yes
				top_liege = {
					liege_before_war = {
						OR = {
							is_tributary = { type = client_state }
							is_tributary = { type = foederati }
							is_tributary = { type = roman_province }
						}
					}
				}
			}
		}
	}
	top_liege = {
		suzerain = {
			any_tributary = {
				OR = {
					character = FROM
					FROM = {
						in_revolt = yes
						liege_before_war = {
							character = PREVPREV
						}
					}
				}
			}
		}
	}
}

is_unfit_to_rule_britannia_trigger = {
	OR = {
		NOT = { age = 20 }
		NOT = { prestige = 400 }
		NOT = { martial = 10 }
		NOT = { diplomacy = 8 }
		NOT = { stewardship = 5 }
		trait = imbecile
		trait = slow
		trait = dwarf
		trait = eunuch
		is_female = yes
		NOR = {
			is_brythonic_culture_trigger = yes
			culture_group = imperiale
		}
	}
	NOT = { has_character_flag = vortigern }
	NOT = { has_character_flag = high_king_usurper }
}

is_unfit_to_rule_aengland_trigger = {
	OR = {
		NOT = {
			check_variable = {
				which = fraction_anglo_saxon_provinces_controlled_including_revolters
				value = 0.5
			}
		}
		AND = {
			is_tributary = { type = anglosaxon_tributary }
			suzerain = { NOT = { war_with = PREV } }
		}
		is_ingvaeonic_culture_trigger = no
	}
	OR = {
		NOT = { has_global_flag = aengland_declared_supremacy }
		NOT = {
			check_variable = { 
				which = aengland_bretwalda_authority
				value = 100
			}
		}
	}
	NOT = { has_character_flag = anglo_saxons_return_leader }
}

is_defending_against_tributary_war = {
	OR = {
		any_war = {
			using_cb = tributary_cb
		}
		any_war = {
			using_cb = tributary_permanent_cb
		}
		any_war = {
			using_cb = tributary_nomad_cb
		}
		any_war = {
			using_cb = tributary_client_state_cb
		}
		any_war = {
			using_cb = tributary_britannia_subject_cb
		}
		any_war = {
			using_cb = tributary_anglosaxon_cb
		}
	}
}

has_feudal_elective_succession_law = {
	OR = {
		has_law = succ_feudal_elective
		has_law = succ_germanic_elective
	}
}

is_germanic_king_or_emperor_trigger = {
	OR = {
		real_tier = KING
		real_tier = EMPEROR
		AND = {
			real_tier = DUKE
			independent = yes
		}
	}
}

# In ruler scope
are_coronations_active_trigger = {
	capital_scope = {
		TECH_MAJESTY = 5
	}
}

is_papal_investiture_allowed_catholics_trigger = {
	year = 750
}

has_augustus_trait = {
	OR = {
		trait = augustus
		trait = northaugustus
		trait = northaugustus_offmap
	}
}

is_islam_active_trigger = {
	always = no
}

has_christian_religious_head_title_trigger = {
	OR = { 
		has_landed_title = k_nuncio_britanniae
		has_landed_title = d_pelagian 
		has_landed_title = d_priscillian 
		has_landed_title = d_nestorian 
		has_landed_title = d_arian_papacy 
		has_landed_title = d_gnostic
	}
}

is_christian_religious_head_title_claimant_trigger = {
	OR = { 
		any_claim = { title = k_nuncio_britanniae } #Antipope
		any_claim = { title = d_pelagian } #Antipope
		any_claim = { title = d_priscillian } #Antipope
		any_claim = { title = d_nestorian } #Antipope
		any_claim = { title = d_arian_papacy } #Antipope
		any_claim = { title = d_gnostic } #Antipope
	}
}

are_dejure_changes_allowed_trigger = {
	conditional_tooltip = {
		trigger = { is_alternate_start = yes }
		is_alternate_start = no
	}
}

is_potential_britannia_subject_trigger = {
	# Any independent Brythonic or Imperial ruler in lower Britannia gets asked
	OR = {
		primary_title = {
			capital_scope = {
				region = world_britannia
				NOT = { region = world_britannia_cymry_henogledd }
			}
			OR = {
				lower_tier_than = DUKE
				empire = {
					NOR = {
						title = e_aengland
						title = e_danes
					}
				}
			}
		}
		any_demesne_title = {
			tier = KING
			capital_scope = {
				region = world_britannia
				NOT = { region = world_britannia_cymry_henogledd }
			}
			empire = {
				NOR = {
					title = e_aengland
					title = e_danes
				}
			}
		}
	}
	is_landed = yes
	independent = yes
	OR = {
		culture_group = celtic
		culture_group = imperiale
	}
	#age = 15
	#NOT = { trait = incapable }
	NOT = { has_character_flag = HK_britannia_claimant }
	NOT = { has_character_flag = HK_challenge_loser }	
}

is_at_war_hostile_with_ROOT_trigger = {
	OR = {		# Is not just looting
		any_war = {
			OR = {
				any_attacker = { character = ROOT }
				any_defender = { character = ROOT }
				any_attacker = {
					ROOT = {
						any_liege = {
							character = PREVPREV
						}
					}
				}
				any_defender = {
					ROOT = {
						any_liege = {
							character = PREVPREV
						}
					}
				}
			}
		}
		any_liege = {
			any_war = {
				OR = {
					any_attacker = { character = ROOT }
					any_defender = { character = ROOT }
					any_attacker = {
						ROOT = {
							any_liege = {
								character = PREVPREV
							}
						}
					}
					any_defender = {
						ROOT = {
							any_liege = {
								character = PREVPREV
							}
						}
					}
				}
			}
		}
	}
}

is_briton_caer_tier_1_province = {
	OR = {
		province_id = 20 	# Glevum
		province_id = 37 	# Eburacum
		province_id = 38	# Lindum
		province_id = 32	# Viroconium
		province_id = 42	# Luguvallum
		#Altclut but not right now
		province_id = 36 	# Deva
		province_id = 47	# Londinium
		province_id = 4		# Aquae Sulis
		province_id = 153 	# Venta Icenorum
		province_id = 49	# Camulodunum
		province_id = 45	# Durovernum
		province_id = 356	# Regentium
		province_id = 2		# Lindinis
		province_id = 1		# Durnovaria
		province_id = 17	# Din Tagell
		province_id = 24	# Isca Siluria
		province_id = 12	# Isca Dumnonia
		province_id = 70	# Ayr
		province_id = 6		# Venta
		province_id = 15	# Portus Adurni
		province_id = 21 	# Burrium
		#Avalon but not right now
		province_id = 11	# Corinium
		province_id = 7		# Calleva
		province_id = 348	# Letocetum
		province_id = 72	# Din Eidyn
		province_id = 56	# Corstopitum
		province_id = 68	# Din Guardi
		province_id = 161	# Din Rheged
		province_id = 148	# Mamucium
		province_id = 43	# Bremetennacum Veteranorum (Setantia)
		province_id = 28	# Caer Swys
		province_id = 9		# Durovobrivis
		province_id = 785	# Verulanium
		province_id = 360	# Arfon
		#province_id = 106	# Avona
		province_id = 336	# Sorviodunum
		province_id = 39 	# Legiolum
		province_id = 33	# Ratae
		province_id = 108	# Iserium
		province_id = 158	# Petuaria
		province_id = 23	# Lactodorum 
		province_id = 52	# Moridunum
	}
}

is_briton_caer_tier_2_province = {
	OR = {
		province_id = 20 	# Glevum
		province_id = 37 	# Eburacum
		province_id = 38	# Lindum
		province_id = 32	# Viroconium
		province_id = 42	# Luguvallum
		#Altclut but not right now
		province_id = 36 	# Deva
		province_id = 47	# Londinium
		province_id = 153 	# Venta Icenorum
		province_id = 49	# Camulodunum
		province_id = 45	# Durovernum
		province_id = 356	# Regentium
		province_id = 1		# Durnovaria
		province_id = 17	# Din Tagell
		province_id = 24	# Isca Siluria
		province_id = 12	# Isca Dumnonia
		province_id = 70	# Ayr
		province_id = 6		# Venta
		province_id = 21 	# Burrium
		province_id = 11	# Corinium
		province_id = 7		# Calleva
		province_id = 785	# Verulanium
		province_id = 72	# Din Eidyn
		province_id = 161	# Din Rheged
		province_id = 39 	# Legiolum
		province_id = 33	# Ratae
		province_id = 108	# Iserium
		province_id = 23	# Lactodorum 
	}
}

is_briton_caer_tier_2_point_5_province = {
	OR = {
		province_id = 20 	# Glevum
		province_id = 37 	# Eburacum
		province_id = 38	# Lindum
		province_id = 32	# Viroconium
		province_id = 42	# Luguvallum
		#Altclut but not right now
		province_id = 36 	# Deva
		province_id = 47	# Londinium
		province_id = 49	# Camulodunum
		province_id = 45	# Durovernum
		province_id = 1		# Durnovaria
		province_id = 24	# Isca Siluria
		#Avalon but not right now
		province_id = 11	# Corinium
		province_id = 72	# Din Eidyn
		province_id = 33	# Ratae
	}
}

is_briton_caer_tier_3_province = {
	OR = {
		province_id = 20 	# Glevum
		province_id = 37 	# Eburacum
		province_id = 38	# Lindum
		province_id = 32	# Viroconium
		province_id = 42	# Luguvallum
		#Altclut but not right now
		#province_id = 36 	# Deva
		province_id = 47	# Londinium
		#Aquae Sulis but not right now
		province_id = 11	# Corinium
	}
}

ROOT_can_declare_war_against_province_trigger = {
	owner = {
		top_liege = {
			NOR = { 
				character = ROOT
				reverse_has_truce = ROOT
				has_non_aggression_pact_with = ROOT
				is_allied_with = ROOT
			}
		}
	}
}

mediterranean_trade_post_trigger = {
	custom_tooltip = {
		text = mediterranean_trade_post_province_desc
		hidden_tooltip = {
			OR = {
				province_id = 662	# Telo Martius
				province_id = 945	# Massilia
				province_id = 903	# Arelate
				province_id = 745	# Narbo
			}
		}
	}
}

is_province_at_fens_edge_trigger = {
	OR = {
		province_id = 1105		# Sleaford
		province_id = 51		# Fenland
		province_id = 787		# Ely
		province_id = 671		# Swaffham
	}
}

is_primary_anglosaxon_kingdom_eastanglia_trigger = {
	OR = {
		NOT = { has_global_flag = aelle_ruling_anglia }
		has_global_flag = anglia_collapsed
	}
	OR = {
		AND = {
			lower_tier_than = KING
			capital_scope = { region = custom_eastanglia }
		}
		AND = {
			higher_tier_than = DUKE
			has_landed_title = k_eastanglia
			OR = {
				num_of_king_titles == 1
				capital_scope = { region = custom_eastanglia }
			}
		}
	}
}

is_primary_anglosaxon_kingdom_essex_trigger = {
	OR = {
		NOT = { has_global_flag = aelle_ruling_anglia }
		has_global_flag = anglia_collapsed
	}
	OR = {
		AND = {
			lower_tier_than = KING
			capital_scope = { region = custom_essex }
		}
		AND = {
			higher_tier_than = DUKE
			has_landed_title = k_eastseaxe
			OR = {
				num_of_king_titles == 1
				capital_scope = { region = custom_essex }
			}
		}
	}
}

is_primary_anglosaxon_kingdom_sussex_trigger = {
	OR = {
		AND = {
			lower_tier_than = KING
			capital_scope = { region = custom_sussex }
		}
		AND = {
			higher_tier_than = DUKE
			has_landed_title = k_sussex
			OR = {
				num_of_king_titles == 1
				capital_scope = { region = custom_sussex }
			}
		}
	}
}

is_primary_anglosaxon_kingdom_cantia_trigger = {
	OR = {
		AND = {
			lower_tier_than = KING
			capital_scope = { region = custom_cantia }
		}
		AND = {
			higher_tier_than = DUKE
			has_landed_title = k_cantia
			OR = {
				num_of_king_titles == 1
				capital_scope = { region = custom_cantia }
			}
		}
	}
}

is_primary_anglosaxon_kingdom_wessex_trigger = {
	OR = {
		AND = {
			lower_tier_than = KING
			capital_scope = { region = custom_wessex }
		}
		AND = {
			higher_tier_than = DUKE
			has_landed_title = k_wessex
			OR = {
				num_of_king_titles == 1
				capital_scope = { region = custom_wessex }
			}
		}
	}
}

is_primary_anglosaxon_kingdom_mercia_trigger = {
	OR = {
		AND = {
			lower_tier_than = KING
			capital_scope = { region = custom_mercia }
		}
		AND = {
			higher_tier_than = DUKE
			has_landed_title = k_mercia
			OR = {
				num_of_king_titles == 1
				capital_scope = { region = custom_mercia }
			}
		}
	}
}

is_primary_anglosaxon_kingdom_northumbria_trigger = {
	OR = {
		AND = {
			lower_tier_than = KING
			capital_scope = { region = custom_northumbria }
		}
		AND = {
			higher_tier_than = DUKE
			has_landed_title = k_northumbria
			OR = {
				num_of_king_titles == 1
				capital_scope = { region = custom_northumbria }
			}
		}
	}
}

is_primary_anglosaxon_kingdom_anglia_trigger = {
	has_global_flag = aelle_ruling_anglia
	NOT = { has_global_flag = anglia_collapsed }
	OR = {
		AND = {
			lower_tier_than = KING
			OR = {
				capital_scope = { region = custom_eastanglia }
				capital_scope = { region = custom_essex }
			}
		}
		AND = {
			higher_tier_than = DUKE
			has_landed_title = k_northumbria
			OR = {
				num_of_king_titles == 1
				capital_scope = { region = custom_eastanglia }
				capital_scope = { region = custom_essex }
			}
		}
	}
}

has_anglosaxon_subjugation_flag_trigger = {
	OR = {
		has_character_flag = anglosaxon_subjugation_k_eastanglia
		has_character_flag = anglosaxon_subjugation_k_eastseaxe
		has_character_flag = anglosaxon_subjugation_k_sussex
		has_character_flag = anglosaxon_subjugation_k_cantia
		has_character_flag = anglosaxon_subjugation_k_wessex
		has_character_flag = anglosaxon_subjugation_k_mercia
		has_character_flag = anglosaxon_subjugation_k_northumbria
		has_character_flag = anglosaxon_subjugation_k_anglia
	}
}

is_similar_culture_to_ROOT_trigger = {
	OR = {
		culture = ROOT
		AND = {
			is_roman_culture_trigger = yes
			ROOT = { is_roman_culture_trigger = yes }
		}
		AND = {
			is_gaelic_culture_trigger = yes
			ROOT = { is_gaelic_culture_trigger = yes }
		}
		AND = {
			is_brythonic_culture_trigger = yes
			ROOT = { is_brythonic_culture_trigger = yes }
		}
		AND = {
			is_north_germanic_trigger = yes
			ROOT = { is_north_germanic_trigger = yes }
		}
		AND = {
			is_ingvaeonic_culture_trigger = yes
			ROOT = { is_ingvaeonic_culture_trigger = yes }
		}
		AND = {
			is_istvaeonic_culture_trigger = yes
			ROOT = { is_istvaeonic_culture_trigger = yes }
		}
		AND = {
			is_irminonic_culture_trigger = yes
			ROOT = { is_irminonic_culture_trigger = yes }
		}
		AND = {
			is_east_germanic_trigger = yes
			ROOT = { is_east_germanic_trigger = yes }
		}
		AND = {
			culture_group = ROOT
			NOR = {
				culture_group = celtic
				culture_group = germanic
			}
		}
	}
}

is_primary_anglosaxon_title_of_FROM_trigger = {
	FROM = {
		OR = {
			primary_title = { title = PREVPREV }
			AND = {
				primary_title = { title = e_aengland }
				any_demesne_title = { title = PREVPREV }
				PREV = { has_title_flag = aengland_primary_kingdom }
			}
		}
	}
}

is_primary_anglosaxon_title_of_ROOT_trigger = {
	ROOT = {
		OR = {
			primary_title = { title = PREVPREV }
			AND = {
				primary_title = { title = e_aengland }
				any_demesne_title = { title = PREVPREV }
				PREV = { has_title_flag = aengland_primary_kingdom }
			}
		}
	}
}

# In the scope of the kingdom the duchy is integrating to
# Uses the duchy_to_integrate event_target to save the target
kingdom_holder_is_integrating_event_target_duchy_trigger = {
	holder_scope = {
		OR = {
			primary_title = { 
				title = PREVPREV
			}
			AND = {
				has_landed_title = e_aengland
				PREV = { has_title_flag = aengland_primary_kingdom }
			}										
		}
	}
	# The de jure liege is not liege of the title itself OR any counties inside the title
	# This is relevant if the kingdom was vassalized after Declaring Supremacy, but before fully uniting the kingdom
	NOT = {
		event_target:duchy_to_integrate = {
			dejure_liege_title = {
				has_holder = yes
				holder_scope = {
					OR = {
						any_demesne_title = { title = PREVPREVPREV }
						any_vassal = { any_demesne_title = { title = PREVPREVPREVPREV } }
						event_target:duchy_to_integrate = {
							any_direct_de_jure_vassal_title = {
								holder_scope = {
									OR = {
										character = PREVPREVPREV
										is_liege_or_above = PREVPREVPREV
									}
								}
							}
						}
					}
				}
			}
		}
	}
}

holds_anglo_saxon_kingdom_trigger = {
	OR = {
		has_landed_title = k_anglia
		has_landed_title = k_east_anglia
		has_landed_title = k_cantia
		has_landed_title = k_mercia
		has_landed_title = k_wessex
		has_landed_title = k_northumbria
		has_landed_title = k_sussex
		has_landed_title = k_eastseaxe
	}
}

is_anglosaxon_tributary_potential_trigger = {
	OR = {
		is_ingvaeonic_culture_trigger = yes
		has_landed_title = e_aengland
	}
	primary_title = {
		capital_scope = {
			region = world_britannia
		}
		OR = {
			lower_tier_than = DUKE
			title = e_aengland
			empire = { title = e_aengland }
		}
	}
}