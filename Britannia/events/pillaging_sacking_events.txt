#####################################
#									#
#   PILLAGING & SACKING EVENTS 		#
#	SIEGE PRISONERS					#
#	ID 319900 - 319999				#
#									#
#####################################



### CASTLES ###

# Pillage Castle (Small)
character_event = {
	id = 319900
	title = "EVTNAME319900"
	desc = "EVTDESC319900"
	picture = "GFX_evt_siege"

	min_age = 15
	only_rulers = yes
	
	is_triggered_only = yes
	
	trigger = { 
		siege = {
			is_attacker = yes
		}
		in_command = yes
		is_landed = yes
		NOT = {
			culture = dane
			ai = yes
		}
		# location = { NOT = { culture = ROOT } }
		FROM = { 
			holding_type = castle 
			NOT = {
				num_of_buildings = 8
			}
			holder_scope = {
				NOT = { same_realm = ROOT }
				NOT = { character = ROOT }
			}
		}
	}
	
	option = {			# No Sacking
		name = "EVTOPTA319900"
		ai_chance = {
			factor = 1
			
			modifier = {
				factor = 1.50
				OR = {
					trait = charitable
					trait = honest
					trait = trusting 
					trait = content
					trait = scholar
				}
			}
			modifier = {
				factor = 3
				OR = {
					trait = kind
					trait = honorable
					trait = just
				}
			}
			modifier = {
				factor = 0.50
				OR = {
					trait = cruel
					trait = wroth
					trait = ruthless
					trait = impaler
				}
			}
			modifier = {
				factor = 0.75
				OR = {
					trait = ruthless
					trait = greedy
					trait = arbitrary
				}
			}
			modifier = {
				factor = 1.2
				piety = 500
			}
			modifier = {
				factor = 1.2
				piety = 1000
			}
			modifier = {
				factor = 5.0
				OR = {
					character = 3
					character = 14
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						culture_group = ROOT
					}
				}
			}
			modifier = {
				factor = 5
				FROM = {
					holder_scope = {
						culture = ROOT
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						religion_group = ROOT
					}
				}
			}
			modifier = {
				factor = 3
				FROM = {
					holder_scope = {
						religion = ROOT
					}
				}
			}
			modifier = {
				factor = 10.0
				OR = {
					has_nickname = nick_the_kind
					has_nickname = nick_the_good
					has_nickname = nick_the_magnanimous
					has_nickname = nick_the_merry
					has_nickname = nick_the_gentle
					has_nickname = nick_the_just
					has_nickname = nick_the_pious
					has_nickname = nick_the_apostle
					has_nickname = nick_the_blessed
					has_nickname = nick_the_monk
					has_nickname = nick_the_confessor
					has_nickname = nick_the_holy
					has_nickname = nick_the_martyr
					has_nickname = nick_the_liberator
				}
			}	
			
		}
		prestige = 10
		piety = 10
		if = {
			limit = {
				NOT = {
					OR = {
						trait = temperate
						trait = gluttonous
						trait = wroth
					}	
				}
			}
			random = {
				chance = 5
				add_trait = temperate
			}	
		}
#		if = {
#			limit = {
#				NOT = {
#					OR = {
#						trait = honorable
#						trait = cruel
#						trait = ruthless
#						trait = arbitrary
#					}	
#				}
#			}
#			random = {
#				chance = 5
#				add_trait = honorable
#			}	
#		}
		if = {
			limit = {
				trait = arbitrary
			}
			random = {
				chance = 30
				remove_trait = arbitrary
			}	
		}
	}
	option = {			# Loot (7-35)
		name = "EVTOPTB319900"
		ai_chance = {
			factor = 1
			
			modifier = {
				factor = 0.2
				location = { culture = ROOT }
			}
			modifier = {
				factor = 3
				culture = dane
			}
			modifier = {
				factor = 1.5
				OR = {
					trait = greedy
					trait = envious
					trait = arbitrary
					trait = slothful 
					trait = wroth
				}
			}
			modifier = {
				factor = 1.5
				OR = {
					trait = cruel
					trait = ruthless
				}
			}
			modifier = {
				factor = 0.8
				OR = {
					learning = 12
					diplomacy = 12
					stewardship = 12
				}
			}
			modifier = {
				factor = 0.8
				OR = {
					learning = 16
					diplomacy = 16
					stewardship = 16
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						NOT = { culture_group = ROOT }
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						NOT = { religion_group = ROOT }
					}
				}
			}
			modifier = {
				factor = 1.12
				NOT = {
					scaled_wealth = 0.75
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					trait = kind
					trait = honorable
					trait = just
				}
			}
		}	
		piety = -15
		random_list = {
			20 = {
				wealth = 3
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 3 }
							character_event = { id = 319980 }
						}
					}
				}
			}
			20 = {
				wealth = 6
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 6 }
							character_event = { id = 319980 }
						}
					}
				}
			}
			20 = {
				wealth = 9
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 9 }
							character_event = { id = 319980 }
						}
					}
				}
			}
			15 = {
				wealth = 11
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 11 }
							character_event = { id = 319980 }
						}
					}
				}
			}
			10 = {
				wealth = 13
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 13 }
							character_event = { id = 319980 }
						}
					}
				}
			}
			10 = {
				wealth = 15
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 15 }
							character_event = { id = 319980 }
						}
					}
				}
			}
			5 = {
				wealth = 17
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 17 }
							character_event = { id = 319980 }
						}
					}
				}
			}
		}
		random = {
			chance = 25
			FROM = {
				destroy_random_building = yes
			}
		}
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			custom_tooltip = {
				text = from_province_loses_prosperity_custom_tooltip
				FROM = {
					location = {
						hidden_tooltip = {
							subtract_variable = { which = prosperity_value value = 3 }
						}
					}
				}
			}
		}
		if = {
			limit = {
				trait = kind
			}
			random = {
				chance = 25
				remove_trait = kind
			}
		}
#		if = {
#			limit = {
#				trait = honorable
#			}
#			random = {
#				chance = 25
#				remove_trait = honorable
#			}
#		}
	}
	option = {			# Sack and Burn (4-15)
		name = "EVTOPTC319900"
		ai_chance = {
			factor = 1
			
			modifier = {
				factor = 0
				location = { culture = ROOT }
			}
			modifier = {
				factor = 0.5
				siege = {
					enemy = {
						leader = {
							ai = yes
						}
					}
				}
			}
			modifier = {
				factor = 1.25
				siege = {
					enemy = {
						leader = {
							ai = no
						}
					}
				}
			}
			modifier = {
				factor = 0.5
				siege = {
					enemy = {
						leader = {
							ai = no
							NOT = {
								demesne_size = 2
							}	
						}
					}
				}
			}
			modifier = {
				factor = 1.50
				OR = {
					trait = wroth
					trait = arbitrary
					trait = impaler
				}
			}
			modifier = {
				factor = 1.5
				OR = {
					trait = cruel
					trait = ruthless
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					trait = charitable
					trait = honest
					trait = trusting 
					trait = content
					trait = scholar
				}
			}
			modifier = {
				factor = 0.25
				OR = {
					trait = kind
					trait = honorable
					trait = just
				}
			}
			modifier = {
				factor = 0.8
				OR = {
					learning = 12
					diplomacy = 12
					stewardship = 12
				}
			}
			modifier = {
				factor = 0.8
				OR = {
					learning = 16
					diplomacy = 16
					stewardship = 16
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						NOT = { culture_group = ROOT }
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						NOT = { religion_group = ROOT }
					}
				}
			}
			modifier = {
				factor = 0.25
				FROM = {
					holder_scope = {
						culture = ROOT
					}
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					holder_scope = {
						religion = ROOT
					}
				}
			}
			modifier = {
				factor = 1.12
				NOT = {
					scaled_wealth = 0.75
				}
			}
			modifier = {
				factor = 3.5
				OR = {
					has_nickname = nick_the_cruel
					has_nickname = nick_the_ill_ruler
					has_nickname = nick_the_terrible
				}
			}
			modifier = {
				factor = 1.75
				OR = {
					culture = pictish
					culture = oldirish
					culture = gaelic
					culture = dane
				}
			}
			modifier = {
				factor = 1.5
				OR = {
					is_ingvaeonic_culture_trigger = yes
					culture = visigoth
					culture = ostrogoth
				}
			}	
			modifier = {
				factor = 0.75
				OR = {
					culture = armorican
					culture = romanobritish
					culture = romanogallic
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					culture = roman
					has_landed_title = e_gaul
					top_liege = { has_landed_title = e_gaul }
					has_landed_title = e_roman_britannia
					top_liege = { has_landed_title = e_roman_britannia }
				}
			}
		}	
		piety = -30
		custom_tooltip = { text = "EVTTT319900A" }
		if = {
			limit = {
				NOT = {
					OR = {
						trait = cruel
						trait = kind
					}
				}
			}
			random = {
				chance = 50
				add_trait = cruel
			}
		}
		if = {
			limit = {
				trait = kind
			}
			remove_trait = kind
		}
		if = {
			limit = {
				trait = honorable
			}
			random = {
				chance = 50
				remove_trait = honorable
			}
		}
		if = {
			limit = {
				trait = just
			}
			random = {
				chance = 25
				remove_trait = just
			}
		}
		if = {
			limit = {
				NOT = {
					OR = {
						trait = honorable
						trait = cruel
						trait = ruthless
						trait = arbitrary
					}	
				}
			}	
			random = {
				chance = 25
				add_trait = ruthless
			}	
		}
		if = {
			limit = {
				trait = cruel
			}
			random = {
				chance = 5
				give_nickname = nick_the_raider
			}
		}
		random_list = {
			30 = {
				wealth = 3
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 3 }
						}
					}
				}
			}
			20 = {
				wealth = 5
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 5 }
						}
					}
				}
			}
			20 = {
				wealth = 6.5
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 6.5 }
						}
					}
				}
			}
			20 = {
				wealth = 8
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 8 }
						}
					}
				}
			}
			10 = {
				wealth = 10
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 10 }
						}
					}
				}
			}	
		}
		hidden_tooltip = {
			random_list = {
				33 = {
					FROM = {
						destroy_random_building = yes
					}	
					FROM = {
						destroy_random_building = yes
					}
				}	
				33 = {
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
				}
				33 = {
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}	
					FROM = {
						destroy_random_building = yes
					}
				}
			}	
		}
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			custom_tooltip = {
				text = from_province_loses_prosperity_custom_tooltip
				FROM = {
					location = {
						hidden_tooltip = {
							subtract_variable = { which = prosperity_value value = 6 }
						}
					}
				}
			}
		}
		hidden_tooltip = {
			if = {
				limit = {
					FROM = {
						holder_scope = {
							independent = yes
						}
					}
				}
				FROM = {
					holder_scope = {
						character_event = {
							id = 319990
						}
					}
				}
			}
			if = {
				limit = {
					FROM = {
						holder_scope = {
							independent = no
						}
					}
				}
				FROM = {
					holder_scope = {
						top_liege = {
							character_event = {
								id = 319990
							}
						}
					}
				}
			}
		}
	}	
}	
# Pillage Castle (Medium)
character_event = {
	id = 319901
	title = "EVTNAME319900"
	desc = "EVTDESC319900"
	picture = "GFX_evt_siege"

	min_age = 15
	only_rulers = yes
	
	is_triggered_only = yes
	
	trigger = { 
		siege = {
			is_attacker = yes
		}
		in_command = yes
		is_landed = yes
		NOT = {
			culture = dane
			ai = yes
		}
		FROM = { 
			holding_type = castle 
			num_of_buildings = 8
			NOT = {
				num_of_buildings = 13
			}
			holder_scope = {
				NOT = { same_realm = ROOT }
				NOT = { character = ROOT }
			}
		}
	}
	
	option = {			# No Sacking
		name = "EVTOPTA319900"
		ai_chance = {
			factor = 1
			
			modifier = {
				factor = 1.50
				OR = {
					trait = charitable
					trait = honest
					trait = trusting 
					trait = content
					trait = scholar
				}
			}
			modifier = {
				factor = 3
				OR = {
					trait = kind
					trait = honorable
					trait = just
				}
			}
			modifier = {
				factor = 0.50
				OR = {
					trait = cruel
					trait = wroth
					trait = ruthless
					trait = impaler
				}
			}
			modifier = {
				factor = 0.75
				OR = {
					trait = ruthless
					trait = greedy
					trait = arbitrary
				}
			}
			modifier = {
				factor = 1.2
				piety = 500
			}
			modifier = {
				factor = 1.2
				piety = 1000
			}
			modifier = {
				factor = 5.0
				OR = {
					character = 3
					character = 14
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						culture_group = ROOT
					}
				}
			}
			modifier = {
				factor = 5
				FROM = {
					holder_scope = {
						culture = ROOT
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						religion_group = ROOT
					}
				}
			}
			modifier = {
				factor = 3
				FROM = {
					holder_scope = {
						religion = ROOT
					}
				}
			}
			modifier = {
				factor = 10.0
				OR = {
					has_nickname = nick_the_kind
					has_nickname = nick_the_good
					has_nickname = nick_the_magnanimous
					has_nickname = nick_the_merry
					has_nickname = nick_the_gentle
					has_nickname = nick_the_just
					has_nickname = nick_the_pious
					has_nickname = nick_the_apostle
					has_nickname = nick_the_blessed
					has_nickname = nick_the_monk
					has_nickname = nick_the_confessor
					has_nickname = nick_the_holy
					has_nickname = nick_the_martyr
					has_nickname = nick_the_liberator
				}
			}	
			
		}
		prestige = 10
		piety = 10
		if = {
			limit = {
				NOT = {
					OR = {
						trait = temperate
						trait = gluttonous
						trait = wroth
					}	
				}
			}
			random = {
				chance = 5
				add_trait = temperate
			}	
		}
#		if = {
#			limit = {
#				NOT = {
#					OR = {
#						trait = honorable
#						trait = cruel
#						trait = ruthless
#						trait = arbitrary
#					}	
#				}
#			}
#			random = {
#				chance = 5
#				add_trait = honorable
#			}	
#		}
		if = {
			limit = {
				trait = arbitrary
			}
			random = {
				chance = 30
				remove_trait = arbitrary
			}	
		}
	}
	option = {			# Loot (11-46)
		name = "EVTOPTB319900"
		ai_chance = {
			factor = 1
			
			modifier = {
				factor = 0.2
				location = { culture = ROOT }
			}
			modifier = {
				factor = 3
				culture = dane
			}
			modifier = {
				factor = 1.5
				OR = {
					trait = greedy
					trait = envious
					trait = arbitrary
					trait = slothful 
					trait = wroth
				}
			}
			modifier = {
				factor = 1.5
				OR = {
					trait = cruel
					trait = ruthless
				}
			}
			modifier = {
				factor = 0.8
				OR = {
					learning = 12
					diplomacy = 12
					stewardship = 12
				}
			}
			modifier = {
				factor = 0.8
				OR = {
					learning = 16
					diplomacy = 16
					stewardship = 16
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						NOT = { culture_group = ROOT }
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						NOT = { religion_group = ROOT }
					}
				}
			}
			modifier = {
				factor = 1.12
				NOT = {
					scaled_wealth = 0.75
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					trait = kind
					trait = honorable
					trait = just
				}
			}
		}	
		piety = -15
		custom_tooltip = { text = "EVTTT319900B" }
		hidden_tooltip = {
			random_list = {
				50 = { wealth = 0.1 }
				30 = {
					FROM = {
						destroy_random_building = yes
					}
				}
				20 = {
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
				}
			}
		}	
		if = {
			limit = {
				trait = kind
			}
			random = {
				chance = 25
				remove_trait = kind
			}
		}
#		if = {
#			limit = {
#				trait = honorable
#			}
#			random = {
#				chance = 25
#				remove_trait = honorable
#			}
#		}
		random_list = {
			20 = {
				wealth = 6
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 6 }
							character_event = { id = 319980 }
						}
					}
				}
			}
			20 = {
				wealth = 9
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 9 }
							character_event = { id = 319980 }
						}
					}
				}
			}
			20 = {
				wealth = 12
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 12 }
							character_event = { id = 319980 }
						}
					}
				}
			}
			15 = {
				wealth = 15
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 15 }
							character_event = { id = 319980 }
						}
					}
				}
			}
			10 = {
				wealth = 18
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 18 }
							character_event = { id = 319980 }
						}
					}
				}
			}
			10 = {
				wealth = 21
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 21 }
							character_event = { id = 319980 }
						}
					}
				}
			}
			5 = {
				wealth = 24
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 24 }
							character_event = { id = 319980 }
						}
					}
				}
			}
		}
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			custom_tooltip = {
				text = from_province_loses_prosperity_custom_tooltip
				FROM = {
					location = {
						hidden_tooltip = {
							subtract_variable = { which = prosperity_value value = 3 }
						}
					}
				}
			}
		}	
	}
	option = {			# Sack and Burn (6-20)
		name = "EVTOPTC319900"
		ai_chance = {
			factor = 1
			
			modifier = {
				factor = 0
				location = { culture = ROOT }
			}
			modifier = {
				factor = 0.5
				siege = {
					enemy = {
						leader = {
							ai = yes
						}
					}
				}
			}
			modifier = {
				factor = 1.25
				siege = {
					enemy = {
						leader = {
							ai = no
						}
					}
				}
			}
			modifier = {
				factor = 0.5
				siege = {
					enemy = {
						leader = {
							ai = no
							NOT = {
								demesne_size = 2
							}	
						}
					}
				}
			}
			modifier = {
				factor = 1.50
				OR = {
					trait = wroth
					trait = arbitrary
					trait = impaler
				}
			}
			modifier = {
				factor = 1.5
				OR = {
					trait = cruel
					trait = ruthless
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					trait = charitable
					trait = honest
					trait = trusting 
					trait = content
					trait = scholar
				}
			}
			modifier = {
				factor = 0.25
				OR = {
					trait = kind
					trait = honorable
					trait = just
				}
			}
			modifier = {
				factor = 0.8
				OR = {
					learning = 12
					diplomacy = 12
					stewardship = 12
				}
			}
			modifier = {
				factor = 0.8
				OR = {
					learning = 16
					diplomacy = 16
					stewardship = 16
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						NOT = { culture_group = ROOT }
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						NOT = { religion_group = ROOT }
					}
				}
			}
			modifier = {
				factor = 0.25
				FROM = {
					holder_scope = {
						culture = ROOT
					}
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					holder_scope = {
						religion = ROOT
					}
				}
			}
			modifier = {
				factor = 1.12
				NOT = {
					scaled_wealth = 0.75
				}
			}
			modifier = {
				factor = 3.5
				OR = {
					has_nickname = nick_the_cruel
					has_nickname = nick_the_ill_ruler
					has_nickname = nick_the_terrible
				}
			}
			modifier = {
				factor = 1.75
				OR = {
					culture = pictish
					culture = oldirish
					culture = gaelic
					culture = dane
				}
			}
			modifier = {
				factor = 1.5
				OR = {
					is_ingvaeonic_culture_trigger = yes
					culture = visigoth
					culture = ostrogoth
				}
			}	
			modifier = {
				factor = 0.75
				OR = {
					culture = armorican
					culture = romanobritish
					culture_group = imperiale
				}
			}
			modifier = {
				factor = 0.75
				OR = {
					culture = roman
					has_landed_title = e_gaul
					top_liege = { has_landed_title = e_gaul }
					has_landed_title = e_roman_britannia
					top_liege = { has_landed_title = e_roman_britannia }
				}
			}
		}	
		piety = -30
		custom_tooltip = { text = "EVTTT319900A" }
		if = {
			limit = {
				NOT = {
					OR = {
						trait = cruel
						trait = kind
					}
				}
			}
			random = {
				chance = 50
				add_trait = cruel
			}
		}
		if = {
			limit = {
				trait = kind
			}
			remove_trait = kind
		}
#		if = {
#			limit = {
#				trait = honorable
#			}
#			random = {
#				chance = 50
#				remove_trait = honorable
#			}
#		}
		if = {
			limit = {
				trait = just
			}
			random = {
				chance = 25
				remove_trait = just
			}
		}
		if = {
			limit = {
				NOT = {
					OR = {
						trait = honorable
						trait = cruel
						trait = ruthless
						trait = arbitrary
					}	
				}
			}	
			random = {
				chance = 25
				add_trait = ruthless
			}	
		}
		if = {
			limit = {
				trait = cruel
			}
			random = {
				chance = 10
				give_nickname = nick_the_raider
			}
		}
		random_list = {
			30 = {
				wealth = 4
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 4 }
						}
					}
				}
			}
			20 = {
				wealth = 6
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 6 }
						}
					}
				}
			}
			20 = {
				wealth = 9
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 9 }
						}
					}
				}
			}
			20 = {
				wealth = 12
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 12 }
						}
					}
				}
			}
			10 = {
				wealth = 15
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 15 }
						}
					}
				}
			}	
		}
		hidden_tooltip = {
			random_list = {
				20 = {
					FROM = {
						destroy_random_building = yes
					}	
					FROM = {
						destroy_random_building = yes
					}
				}	
				20 = {
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
				}
				20 = {
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}	
					FROM = {
						destroy_random_building = yes
					}
				}
				20 = {
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}	
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
				}
				20 = {
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}	
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
				}
			}	
		}	
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			custom_tooltip = {
				text = from_province_loses_prosperity_custom_tooltip
				FROM = {
					location = {
						hidden_tooltip = {
							subtract_variable = { which = prosperity_value value = 6 }
						}
					}
				}
			}
		}
		hidden_tooltip = {
			if = {
				limit = {
					FROM = {
						holder_scope = {
							independent = yes
						}
					}
				}
				FROM = {
					holder_scope = {
						character_event = {
							id = 319990
						}
					}
				}
			}
			if = {
				limit = {
					FROM = {
						holder_scope = {
							independent = no
						}
					}
				}
				FROM = {
					holder_scope = {
						top_liege = {
							character_event = {
								id = 319990
							}
						}
					}
				}
			}
		}
	}	
}	
# Pillage Castle (Large)
character_event = {
	id = 319902
	title = "EVTNAME319900"
	desc = "EVTDESC319900"
	picture = "GFX_evt_siege"

	min_age = 15
	only_rulers = yes
	
	is_triggered_only = yes
	
	trigger = { 
		siege = {
			is_attacker = yes
		}
		in_command = yes
		is_landed = yes
		NOT = {
			culture = dane
			ai = yes
		}
		FROM = { 
			holding_type = castle 
			num_of_buildings = 13
			holder_scope = {
				NOT = { same_realm = ROOT }
				NOT = { character = ROOT }
			}
		}
	}
	
	option = {			# No Sacking
		name = "EVTOPTA319900"
		ai_chance = {
			factor = 1
			
			modifier = {
				factor = 1.50
				OR = {
					trait = charitable
					trait = honest
					trait = trusting 
					trait = content
					trait = scholar
				}
			}
			modifier = {
				factor = 3
				OR = {
					trait = kind
					trait = honorable
					trait = just
				}
			}
			modifier = {
				factor = 0.50
				OR = {
					trait = cruel
					trait = wroth
					trait = ruthless
					trait = impaler
				}
			}
			modifier = {
				factor = 0.75
				OR = {
					trait = ruthless
					trait = greedy
					trait = arbitrary
				}
			}
			modifier = {
				factor = 1.2
				piety = 500
			}
			modifier = {
				factor = 1.2
				piety = 1000
			}
			modifier = {
				factor = 5.0
				OR = {
					character = 3
					character = 14
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						culture_group = ROOT
					}
				}
			}
			modifier = {
				factor = 5
				FROM = {
					holder_scope = {
						culture = ROOT
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						religion_group = ROOT
					}
				}
			}
			modifier = {
				factor = 3
				FROM = {
					holder_scope = {
						religion = ROOT
					}
				}
			}
			modifier = {
				factor = 10.0
				OR = {
					has_nickname = nick_the_kind
					has_nickname = nick_the_good
					has_nickname = nick_the_magnanimous
					has_nickname = nick_the_merry
					has_nickname = nick_the_gentle
					has_nickname = nick_the_just
					has_nickname = nick_the_pious
					has_nickname = nick_the_apostle
					has_nickname = nick_the_blessed
					has_nickname = nick_the_monk
					has_nickname = nick_the_confessor
					has_nickname = nick_the_holy
					has_nickname = nick_the_martyr
					has_nickname = nick_the_liberator
				}
			}	
			
		}
		prestige = 10
		piety = 10
		if = {
			limit = {
				NOT = {
					OR = {
						trait = temperate
						trait = gluttonous
						trait = wroth
					}	
				}
			}
			random = {
				chance = 5
				add_trait = temperate
			}	
		}
#		if = {
#			limit = {
#				NOT = {
#					OR = {
#						trait = honorable
#						trait = cruel
#						trait = ruthless
#						trait = arbitrary
#					}	
#				}
#			}
#			random = {
#				chance = 5
#				add_trait = honorable
#			}	
#		}
		if = {
			limit = {
				trait = arbitrary
			}
			random = {
				chance = 30
				remove_trait = arbitrary
			}	
		}
	}
	option = {			# Loot (15-60)
		name = "EVTOPTB319900"
		ai_chance = {
			factor = 1
			
			modifier = {
				factor = 0.2
				location = { culture = ROOT }
			}
			modifier = {
				factor = 3
				culture = dane
			}
			modifier = {
				factor = 1.5
				OR = {
					trait = greedy
					trait = envious
					trait = arbitrary
					trait = slothful 
					trait = wroth
				}
			}
			modifier = {
				factor = 1.5
				OR = {
					trait = cruel
					trait = ruthless
				}
			}
			modifier = {
				factor = 0.8
				OR = {
					learning = 12
					diplomacy = 12
					stewardship = 12
				}
			}
			modifier = {
				factor = 0.8
				OR = {
					learning = 16
					diplomacy = 16
					stewardship = 16
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						NOT = { culture_group = ROOT }
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						NOT = { religion_group = ROOT }
					}
				}
			}
			modifier = {
				factor = 1.12
				NOT = {
					scaled_wealth = 0.75
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					trait = kind
					trait = honorable
					trait = just
				}
			}
		}	
		piety = -15
		custom_tooltip = { text = "EVTTT319900B" }
		hidden_tooltip = {
			random_list = {
				50 = { wealth = 0.1 }
				20 = {
					FROM = {
						destroy_random_building = yes
					}
				}
				20 = {
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
				}
				10 = {
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
				}
			}
		}
		if = {
			limit = {
				trait = kind
			}
			random = {
				chance = 25
				remove_trait = kind
			}
		}
#		if = {
#			limit = {
#				trait = honorable
#			}
#			random = {
#				chance = 25
#				remove_trait = honorable
#			}
#		}
		random_list = {
			20 = {
				wealth = 8
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 8 }
							character_event = { id = 319980 }
						}
					}
				}
			}
			20 = {
				wealth = 12
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 12 }
							character_event = { id = 319980 }
						}
					}
				}
			}
			20 = {
				wealth = 15
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 15 }
							character_event = { id = 319980 }
						}
					}
				}
			}
			15 = {
				wealth = 20
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 20 }
							character_event = { id = 319980 }
						}
					}
				}
			}
			10 = {
				wealth = 23
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 23 }
							character_event = { id = 319980 }
						}
					}
				}
			}
			10 = {
				wealth = 26
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 26 }
							character_event = { id = 319980 }
						}
					}
				}
			}
			5 = {
				wealth = 30
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 30 }
							character_event = { id = 319980 }
						}
					}
				}
			}
		}
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			custom_tooltip = {
				text = from_province_loses_prosperity_custom_tooltip
				FROM = {
					location = {
						hidden_tooltip = {
							subtract_variable = { which = prosperity_value value = 3 }
						}
					}
				}
			}
		}
	}
	option = {			# Sack and Burn (8-25)
		name = "EVTOPTC319900"
		ai_chance = {
			factor = 1
			
			modifier = {
				factor = 0
				location = { culture = ROOT }
			}
			modifier = {
				factor = 0.5
				siege = {
					enemy = {
						leader = {
							ai = yes
						}
					}
				}
			}
			modifier = {
				factor = 1.25
				siege = {
					enemy = {
						leader = {
							ai = no
						}
					}
				}
			}
			modifier = {
				factor = 0.5
				siege = {
					enemy = {
						leader = {
							ai = no
							NOT = {
								demesne_size = 2
							}	
						}
					}
				}
			}
			modifier = {
				factor = 1.50
				OR = {
					trait = wroth
					trait = arbitrary
					trait = impaler
				}
			}
			modifier = {
				factor = 1.5
				OR = {
					trait = cruel
					trait = ruthless
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					trait = charitable
					trait = honest
					trait = trusting 
					trait = content
					trait = scholar
				}
			}
			modifier = {
				factor = 0.25
				OR = {
					trait = kind
					trait = honorable
					trait = just
				}
			}
			modifier = {
				factor = 0.8
				OR = {
					learning = 12
					diplomacy = 12
					stewardship = 12
				}
			}
			modifier = {
				factor = 0.8
				OR = {
					learning = 16
					diplomacy = 16
					stewardship = 16
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						NOT = { culture_group = ROOT }
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						NOT = { religion_group = ROOT }
					}
				}
			}
			modifier = {
				factor = 0.25
				FROM = {
					holder_scope = {
						culture = ROOT
					}
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					holder_scope = {
						religion = ROOT
					}
				}
			}
			modifier = {
				factor = 1.12
				NOT = {
					scaled_wealth = 0.75
				}
			}
			modifier = {
				factor = 3.5
				OR = {
					has_nickname = nick_the_cruel
					has_nickname = nick_the_ill_ruler
					has_nickname = nick_the_terrible
				}
			}
			modifier = {
				factor = 1.75
				OR = {
					culture = pictish
					culture = oldirish
					culture = gaelic
				}
			}
			modifier = {
				factor = 1.5
				OR = {
					is_ingvaeonic_culture_trigger = yes
					culture = visigoth
					culture = ostrogoth
				}
			}	
			modifier = {
				factor = 0.75
				OR = {
					culture = armorican
					culture = romanobritish
					culture_group = imperiale
				}
			}
			modifier = {
				factor = 0.75
				OR = {
					culture = roman
					has_landed_title = e_gaul
					top_liege = { has_landed_title = e_gaul }
					has_landed_title = e_roman_britannia
					top_liege = { has_landed_title = e_roman_britannia }
				}
			}
		}	
		piety = -30
		custom_tooltip = { text = "EVTTT319900A" }
		if = {
			limit = {
				NOT = {
					OR = {
						trait = cruel
						trait = kind
					}
				}
			}
			random = {
				chance = 50
				add_trait = cruel
			}
		}
		if = {
			limit = {
				trait = kind
			}
			remove_trait = kind
		}
#		if = {
#			limit = {
#				trait = honorable
#			}
#			random = {
#				chance = 50
#				remove_trait = honorable
#			}
#		}
		if = {
			limit = {
				trait = just
			}
			random = {
				chance = 25
				remove_trait = just
			}
		}
		if = {
			limit = {
				NOT = {
					OR = {
						trait = honorable
						trait = cruel
						trait = ruthless
						trait = arbitrary
					}	
				}
			}	
			random = {
				chance = 25
				add_trait = ruthless
			}	
		}
		if = {
			limit = {
				trait = cruel
			}
			random = {
				chance = 15
				give_nickname = nick_the_raider
			}
		}
		random_list = {
			30 = {
				wealth = 6
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 6 }
						}
					}
				}
			}
			20 = {
				wealth = 9
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 9 }
						}
					}
				}
			}
			20 = {
				wealth = 12
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 12 }
						}
					}
				}
			}
			20 = {
				wealth = 14
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 14 }
						}
					}
				}
			}
			10 = {
				wealth = 16
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 16 }
						}
					}
				}
			}	
		}
		hidden_tooltip = {
			random_list = {
				20 = {
					FROM = {
						destroy_random_building = yes
					}	
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
				}	
				20 = {
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
				}
				20 = {
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}	
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
				}
				20 = {
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}	
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
				}
				10 = {
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}	
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
				}
				10 = {
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}	
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
				}
			}	
		}	
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			custom_tooltip = {
				text = from_province_loses_prosperity_custom_tooltip
				FROM = {
					location = {
						hidden_tooltip = {
							subtract_variable = { which = prosperity_value value = 6 }
						}
					}
				}
			}
		}
		hidden_tooltip = {
			if = {
				limit = {
					FROM = {
						holder_scope = {
							independent = yes
						}
					}
				}
				FROM = {
					holder_scope = {
						character_event = {
							id = 319990
						}
					}
				}
			}
			if = {
				limit = {
					FROM = {
						holder_scope = {
							independent = no
						}
					}
				}
				FROM = {
					holder_scope = {
						top_liege = {
							character_event = {
								id = 319990
							}
						}
					}
				}
			}
		}
	}	
}	


### TOWNS ###

# Pillage Town (Small)
character_event = {
	id = 319920
	title = "EVTNAME319920"
	desc = "EVTDESC319920"
	picture = "GFX_evt_coastal_village"

	min_age = 15
	only_rulers = yes
	
	is_triggered_only = yes
	
	trigger = { 
		siege = {
			is_attacker = yes
		}
		in_command = yes
		is_landed = yes
		NOT = {
			culture = dane
			ai = yes
		}
		FROM = { 
			holding_type = city 
			NOT = {
				num_of_buildings = 8
			}
			holder_scope = {
				NOT = { same_realm = ROOT }
				NOT = { character = ROOT }
			}			
		}
	}
	
	option = {			# No Sacking
		name = "EVTOPTA319920"
		ai_chance = {
			factor = 1
			
			modifier = {
				factor = 1.50
				OR = {
					trait = charitable
					trait = honest
					trait = trusting 
					trait = content
					trait = scholar
				}
			}
			modifier = {
				factor = 3
				OR = {
					trait = kind
					trait = honorable
					trait = just
				}
			}
			modifier = {
				factor = 0.50
				OR = {
					trait = cruel
					trait = wroth
					trait = ruthless
					trait = impaler
				}
			}
			modifier = {
				factor = 0.75
				OR = {
					trait = ruthless
					trait = greedy
					trait = arbitrary
				}
			}
			modifier = {
				factor = 1.2
				piety = 500
			}
			modifier = {
				factor = 1.2
				piety = 1000
			}
			modifier = {
				factor = 5.0
				OR = {
					character = 3
					character = 14
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						culture_group = ROOT
					}
				}
			}
			modifier = {
				factor = 5
				FROM = {
					holder_scope = {
						culture = ROOT
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						religion_group = ROOT
					}
				}
			}
			modifier = {
				factor = 3
				FROM = {
					holder_scope = {
						religion = ROOT
					}
				}
			}
			modifier = {
				factor = 10.0
				OR = {
					has_nickname = nick_the_kind
					has_nickname = nick_the_good
					has_nickname = nick_the_magnanimous
					has_nickname = nick_the_merry
					has_nickname = nick_the_gentle
					has_nickname = nick_the_just
					has_nickname = nick_the_pious
					has_nickname = nick_the_apostle
					has_nickname = nick_the_blessed
					has_nickname = nick_the_monk
					has_nickname = nick_the_confessor
					has_nickname = nick_the_holy
					has_nickname = nick_the_martyr
					has_nickname = nick_the_liberator
				}
			}	
			
		}
		prestige = 10
		piety = 10
		if = {
			limit = {
				NOT = {
					OR = {
						trait = temperate
						trait = gluttonous
						trait = wroth
					}	
				}
			}
			random = {
				chance = 5
				add_trait = temperate
			}	
		}
#		if = {
#			limit = {
#				NOT = {
#					OR = {
#						trait = honorable
#						trait = cruel
#						trait = ruthless
#						trait = arbitrary
#					}	
#				}
#			}
#			random = {
#				chance = 5
#				add_trait = honorable
#			}	
#		}
		if = {
			limit = {
				trait = arbitrary
			}
			random = {
				chance = 30
				remove_trait = arbitrary
			}	
		}
	}
	option = {			# Loot (10-42)
		name = "EVTOPTB319920"
		ai_chance = {
			factor = 1
			
			modifier = {
				factor = 0.2
				location = { culture = ROOT }
			}	
			modifier = {
				factor = 1.5
				OR = {
					trait = greedy
					trait = envious
					trait = arbitrary
					trait = slothful 
					trait = wroth
				}
			}
			modifier = {
				factor = 3
				culture = dane
			}
			modifier = {
				factor = 1.5
				OR = {
					trait = cruel
					trait = ruthless
				}
			}
			modifier = {
				factor = 0.8
				OR = {
					learning = 12
					diplomacy = 12
					stewardship = 12
				}
			}
			modifier = {
				factor = 0.8
				OR = {
					learning = 16
					diplomacy = 16
					stewardship = 16
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						NOT = { culture_group = ROOT }
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						NOT = { religion_group = ROOT }
					}
				}
			}
			modifier = {
				factor = 1.12
				NOT = {
					scaled_wealth = 0.75
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					trait = kind
					trait = honorable
					trait = just
				}
			}
		}	
		piety = -20
		random_list = {
			20 = {
				wealth = 5
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 5 }
							character_event = { id = 319981 }
						}
					}
				}
			}
			20 = {
				wealth = 8
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 8 }
							character_event = { id = 319981 }
						}
					}
				}
			}
			20 = {
				wealth = 11
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 11 }
							character_event = { id = 319981 }
						}
					}
				}
			}
			15 = {
				wealth = 14
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 14 }
							character_event = { id = 319981 }
						}
					}
				}
			}
			10 = {
				wealth = 16
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 16 }
							character_event = { id = 319981 }
						}
					}
				}
			}
			10 = {
				wealth = 18
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 18 }
							character_event = { id = 319981 }
						}
					}
				}
			}
			5 = {
				wealth = 21
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 21 }
							character_event = { id = 319981 }
						}
					}
				}
			}
		}
		random = {
			chance = 25
			FROM = {
				destroy_random_building = yes
			}
		}		
		if = {
			limit = {
				trait = kind
			}
			random = {
				chance = 25
				remove_trait = kind
			}
		}
#		if = {
#			limit = {
#				trait = honorable
#			}
#			random = {
#				chance = 25
#				remove_trait = honorable
#			}
#		}
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			custom_tooltip = {
				text = from_province_loses_prosperity_custom_tooltip
				FROM = {
					location = {
						hidden_tooltip = {
							subtract_variable = { which = prosperity_value value = 3 }
						}
					}
				}
			}
		}
	}
	option = {			# Sack and Burn (7-21)
		name = "EVTOPTC319920"
		ai_chance = {
			factor = 1
			
			modifier = {
				factor = 0
				location = { culture = ROOT }
			}
			modifier = {
				factor = 0.5
				siege = {
					enemy = {
						leader = {
							ai = yes
						}
					}
				}
			}
			modifier = {
				factor = 1.25
				siege = {
					enemy = {
						leader = {
							ai = no
						}
					}
				}
			}
			modifier = {
				factor = 0.5
				siege = {
					enemy = {
						leader = {
							ai = no
							NOT = {
								demesne_size = 2
							}	
						}
					}
				}
			}
			modifier = {
				factor = 1.50
				OR = {
					trait = wroth
					trait = arbitrary
					trait = impaler
				}
			}
			modifier = {
				factor = 1.5
				OR = {
					trait = cruel
					trait = ruthless
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					trait = charitable
					trait = honest
					trait = trusting 
					trait = content
					trait = scholar
				}
			}
			modifier = {
				factor = 0.25
				OR = {
					trait = kind
					trait = honorable
					trait = just
				}
			}
			modifier = {
				factor = 0.8
				OR = {
					learning = 12
					diplomacy = 12
					stewardship = 12
				}
			}
			modifier = {
				factor = 0.8
				OR = {
					learning = 16
					diplomacy = 16
					stewardship = 16
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						NOT = { culture_group = ROOT }
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						NOT = { religion_group = ROOT }
					}
				}
			}
			modifier = {
				factor = 0.25
				FROM = {
					holder_scope = {
						culture = ROOT
					}
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					holder_scope = {
						religion = ROOT
					}
				}
			}
			modifier = {
				factor = 1.12
				NOT = {
					scaled_wealth = 0.75
				}
			}
			modifier = {
				factor = 3.5
				OR = {
					has_nickname = nick_the_cruel
					has_nickname = nick_the_ill_ruler
					has_nickname = nick_the_terrible
				}
			}
			modifier = {
				factor = 1.75
				OR = {
					culture = pictish
					culture = oldirish
					culture = gaelic
					culture = dane
				}
			}
			modifier = {
				factor = 1.5
				OR = {
					is_ingvaeonic_culture_trigger = yes
					culture = visigoth
					culture = ostrogoth
				}
			}	
			modifier = {
				factor = 0.75
				OR = {
					culture = armorican
					culture = romanobritish
					culture_group = imperiale
				}
			}
			modifier = {
				factor = 0.75
				OR = {
					culture = roman
					has_landed_title = e_gaul
					top_liege = { has_landed_title = e_gaul }
					has_landed_title = e_roman_britannia
					top_liege = { has_landed_title = e_roman_britannia }
				}
			}
		}	
		piety = -40
		custom_tooltip = { text = "EVTTT319900A" }
		if = {
			limit = {
				NOT = {
					OR = {
						trait = cruel
						trait = kind
					}
				}
			}
			random = {
				chance = 50
				add_trait = cruel
			}
		}
		if = {
			limit = {
				trait = kind
			}
			remove_trait = kind
		}
#		if = {
#			limit = {
#				trait = honorable
#			}
#			random = {
#				chance = 50
#				remove_trait = honorable
#			}
#		}
		if = {
			limit = {
				trait = just
			}
			random = {
				chance = 25
				remove_trait = just
			}
		}
		if = {
			limit = {
				NOT = {
					OR = {
						trait = honorable
						trait = cruel
						trait = ruthless
						trait = arbitrary
					}	
				}
			}	
			random = {
				chance = 25
				add_trait = ruthless
			}	
		}
		if = {
			limit = {
				trait = cruel
			}
			random = {
				chance = 3
				give_nickname = nick_the_raider
			}
		}
		random_list = {
			30 = {
				wealth = 5
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 5 }
						}
					}
				}
			}
			20 = {
				wealth = 8
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 8 }
						}
					}
				}
			}
			20 = {
				wealth = 10
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 10 }
						}
					}
				}
			}
			20 = {
				wealth = 12
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 12 }
						}
					}
				}
			}
			10 = {
				wealth = 14
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 14 }
						}
					}
				}
			}	
		}
		hidden_tooltip = {
			random_list = {
				33 = {
					FROM = {
						destroy_random_building = yes
					}	
					FROM = {
						destroy_random_building = yes
					}
				}	
				33 = {
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
				}
				33 = {
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}	
					FROM = {
						destroy_random_building = yes
					}
				}
			}	
		}	
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			custom_tooltip = {
				text = from_province_loses_prosperity_custom_tooltip
				FROM = {
					location = {
						hidden_tooltip = {
							subtract_variable = { which = prosperity_value value = 6 }
						}
					}
				}
			}
		}
		hidden_tooltip = {
			if = {
				limit = {
					FROM = {
						holder_scope = {
							independent = yes
						}
					}
				}
				FROM = {
					holder_scope = {
						character_event = {
							id = 319991
						}
					}
				}
			}
			if = {
				limit = {
					FROM = {
						holder_scope = {
							independent = no
						}
					}
				}
				FROM = {
					holder_scope = {
						top_liege = {
							character_event = {
								id = 319991
							}
						}
					}
				}
			}
		}
	}	
}	
# Pillage Town (Medium)
character_event = {
	id = 319921
	title = "EVTNAME319920"
	desc = "EVTDESC319920"
	picture = "GFX_evt_town_palisade"

	min_age = 15
	only_rulers = yes
	
	is_triggered_only = yes
	
	trigger = { 
		siege = {
			is_attacker = yes
		}
		in_command = yes
		is_landed = yes
		NOT = {
			culture = dane
			ai = yes
		}
		FROM = { 
			holding_type = city 
			num_of_buildings = 8
			NOT = {
				num_of_buildings = 13
			}
			holder_scope = {
				NOT = { same_realm = ROOT }
				NOT = { character = ROOT }
			}			
		}
	}
	
	option = {			# No Sacking
		name = "EVTOPTA319920"
		ai_chance = {
			factor = 1
			
			modifier = {
				factor = 1.50
				OR = {
					trait = charitable
					trait = honest
					trait = trusting 
					trait = content
					trait = scholar
				}
			}
			modifier = {
				factor = 3
				OR = {
					trait = kind
					trait = honorable
					trait = just
				}
			}
			modifier = {
				factor = 0.50
				OR = {
					trait = cruel
					trait = wroth
					trait = ruthless
					trait = impaler
				}
			}
			modifier = {
				factor = 0.75
				OR = {
					trait = ruthless
					trait = greedy
					trait = arbitrary
				}
			}
			modifier = {
				factor = 1.2
				piety = 500
			}
			modifier = {
				factor = 1.2
				piety = 1000
			}
			modifier = {
				factor = 5.0
				OR = {
					character = 3
					character = 14
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						culture_group = ROOT
					}
				}
			}
			modifier = {
				factor = 5
				FROM = {
					holder_scope = {
						culture = ROOT
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						religion_group = ROOT
					}
				}
			}
			modifier = {
				factor = 3
				FROM = {
					holder_scope = {
						religion = ROOT
					}
				}
			}
			modifier = {
				factor = 10.0
				OR = {
					has_nickname = nick_the_kind
					has_nickname = nick_the_good
					has_nickname = nick_the_magnanimous
					has_nickname = nick_the_merry
					has_nickname = nick_the_gentle
					has_nickname = nick_the_just
					has_nickname = nick_the_pious
					has_nickname = nick_the_apostle
					has_nickname = nick_the_blessed
					has_nickname = nick_the_monk
					has_nickname = nick_the_confessor
					has_nickname = nick_the_holy
					has_nickname = nick_the_martyr
					has_nickname = nick_the_liberator
				}
			}	
			
		}
		prestige = 10
		piety = 10
		if = {
			limit = {
				NOT = {
					OR = {
						trait = temperate
						trait = gluttonous
						trait = wroth
					}	
				}
			}
			random = {
				chance = 5
				add_trait = temperate
			}	
		}
#		if = {
#			limit = {
#				NOT = {
#					OR = {
#						trait = honorable
#						trait = cruel
#						trait = ruthless
#						trait = arbitrary
#					}	
#				}
#			}
#			random = {
#				chance = 5
#				add_trait = honorable
#			}	
#		}
		if = {
			limit = {
				trait = arbitrary
			}
			random = {
				chance = 30
				remove_trait = arbitrary
			}	
		}
	}
	option = {			# Loot (16-71)
		name = "EVTOPTB319920"
		ai_chance = {
			factor = 1
			
			modifier = {
				factor = 0.2
				location = { culture = ROOT }
			}
			modifier = {
				factor = 3
				culture = dane
			}
			modifier = {
				factor = 1.5
				OR = {
					trait = greedy
					trait = envious
					trait = arbitrary
					trait = slothful 
					trait = wroth
				}
			}
			modifier = {
				factor = 1.5
				OR = {
					trait = cruel
					trait = ruthless
				}
			}
			modifier = {
				factor = 0.8
				OR = {
					learning = 12
					diplomacy = 12
					stewardship = 12
				}
			}
			modifier = {
				factor = 0.8
				OR = {
					learning = 16
					diplomacy = 16
					stewardship = 16
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						NOT = { culture_group = ROOT }
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						NOT = { religion_group = ROOT }
					}
				}
			}
			modifier = {
				factor = 1.12
				NOT = {
					scaled_wealth = 0.75
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					trait = kind
					trait = honorable
					trait = just
				}
			}
		}	
		piety = -20
		custom_tooltip = { text = "EVTTT319900B" }
		hidden_tooltip = {
			random_list = {
				50 = { wealth = 0.1 }
				30 = {
					FROM = {
						destroy_random_building = yes
					}
				}
				20 = {
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
				}
			}
		}	
		if = {
			limit = {
				trait = kind
			}
			random = {
				chance = 25
				remove_trait = kind
			}
		}
#		if = {
#			limit = {
#				trait = honorable
#			}
#			random = {
#				chance = 25
#				remove_trait = honorable
#			}
#		}
		random_list = {
			20 = {
				wealth = 8
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 8 }
							character_event = { id = 319981 }
						}
					}
				}
			}
			20 = {
				wealth = 13
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 13 }
							character_event = { id = 319981 }
						}
					}
				}
			}
			20 = {
				wealth = 188
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 18 }
							character_event = { id = 319981 }
						}
					}
				}
			}
			15 = {
				wealth = 22
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 22 }
							character_event = { id = 319981 }
						}
					}
				}
			}
			10 = {
				wealth = 26
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 26 }
							character_event = { id = 319981 }
						}
					}
				}
			}
			10 = {
				wealth = 31
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 31 }
							character_event = { id = 319981 }
						}
					}
				}
			}
			5 = {
				wealth = 35
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 35 }
							character_event = { id = 319981 }
						}
					}
				}
			}
		}
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			custom_tooltip = {
				text = from_province_loses_prosperity_custom_tooltip
				FROM = {
					location = {
						hidden_tooltip = {
							subtract_variable = { which = prosperity_value value = 3 }
						}
					}
				}
			}
		}
	}
	option = {			# Sack and Burn (10-27)
		name = "EVTOPTC319920"
		ai_chance = {
			factor = 1
			
			modifier = {
				factor = 0
				location = { culture = ROOT }
			}
			modifier = {
				factor = 0.5
				siege = {
					enemy = {
						leader = {
							ai = yes
						}
					}
				}
			}
			modifier = {
				factor = 1.25
				siege = {
					enemy = {
						leader = {
							ai = no
						}
					}
				}
			}
			modifier = {
				factor = 0.5
				siege = {
					enemy = {
						leader = {
							ai = no
							NOT = {
								demesne_size = 2
							}	
						}
					}
				}
			}
			modifier = {
				factor = 1.50
				OR = {
					trait = wroth
					trait = arbitrary
					trait = impaler
				}
			}
			modifier = {
				factor = 1.5
				OR = {
					trait = cruel
					trait = ruthless
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					trait = charitable
					trait = honest
					trait = trusting 
					trait = content
					trait = scholar
				}
			}
			modifier = {
				factor = 0.2
				OR = {
					trait = kind
					trait = honorable
					trait = just
				}
			}
			modifier = {
				factor = 0.8
				OR = {
					learning = 12
					diplomacy = 12
					stewardship = 12
				}
			}
			modifier = {
				factor = 0.8
				OR = {
					learning = 16
					diplomacy = 16
					stewardship = 16
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						NOT = { culture_group = ROOT }
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						NOT = { religion_group = ROOT }
					}
				}
			}
			modifier = {
				factor = 0.25
				FROM = {
					holder_scope = {
						culture = ROOT
					}
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					holder_scope = {
						religion = ROOT
					}
				}
			}
			modifier = {
				factor = 1.12
				NOT = {
					scaled_wealth = 0.75
				}
			}
			modifier = {
				factor = 3.5
				OR = {
					has_nickname = nick_the_cruel
					has_nickname = nick_the_ill_ruler
					has_nickname = nick_the_terrible
				}
			}
			modifier = {
				factor = 1.75
				OR = {
					culture = pictish
					culture = oldirish
					culture = gaelic
					culture = dane
				}
			}
			modifier = {
				factor = 1.5
				OR = {
					is_ingvaeonic_culture_trigger = yes
					culture = visigoth
					culture = ostrogoth
				}
			}	
			modifier = {
				factor = 0.5
				OR = {
					culture = armorican
					culture = romanobritish
					culture_group = imperiale
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					culture = roman
					has_landed_title = e_gaul
					top_liege = { has_landed_title = e_gaul }
					has_landed_title = e_roman_britannia
					top_liege = { has_landed_title = e_roman_britannia }
				}
			}
		}	
		piety = -40
		custom_tooltip = { text = "EVTTT319900A" }
		if = {
			limit = {
				NOT = {
					OR = {
						trait = cruel
						trait = kind
					}
				}
			}
			random = {
				chance = 50
				add_trait = cruel
			}
		}
		if = {
			limit = {
				trait = kind
			}
			remove_trait = kind
		}
#		if = {
#			limit = {
#				trait = honorable
#			}
#			random = {
#				chance = 75
#				remove_trait = honorable
#			}
#		}
		if = {
			limit = {
				trait = just
			}
			random = {
				chance = 50
				remove_trait = just
			}
		}
		if = {
			limit = {
				NOT = {
					OR = {
						trait = honorable
						trait = cruel
						trait = ruthless
						trait = arbitrary
					}	
				}
			}	
			random = {
				chance = 30
				add_trait = ruthless
			}	
		}
		if = {
			limit = {
				trait = cruel
			}
			random = {
				chance = 5
				give_nickname = nick_the_raider
			}
		}
		random_list = {
			30 = {
				wealth = 7
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 7 }
						}
					}
				}
			}
			20 = {
				wealth = 10
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 10 }
						}
					}
				}
			}
			20 = {
				wealth = 13
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 13 }
						}
					}
				}
			}
			20 = {
				wealth = 1
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 16 }
						}
					}
				}
			}
			10 = {
				wealth = 18
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 18 }
						}
					}
				}
			}	
		}
		hidden_tooltip = {
			random_list = {
				20 = {
					FROM = {
						destroy_random_building = yes
					}	
					FROM = {
						destroy_random_building = yes
					}
				}	
				20 = {
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
				}
				20 = {
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}	
					FROM = {
						destroy_random_building = yes
					}
				}
				20 = {
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}	
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
				}
				20 = {
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}	
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
				}
			}	
		}	
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			custom_tooltip = {
				text = from_province_loses_prosperity_custom_tooltip
				FROM = {
					location = {
						hidden_tooltip = {
							subtract_variable = { which = prosperity_value value = 6 }
						}
					}
				}
			}
		}
		hidden_tooltip = {
			if = {
				limit = {
					FROM = {
						holder_scope = {
							independent = yes
						}
					}
				}
				FROM = {
					holder_scope = {
						character_event = {
							id = 319991
						}
					}
				}
			}
			if = {
				limit = {
					FROM = {
						holder_scope = {
							independent = no
						}
					}
				}
				FROM = {
					holder_scope = {
						top_liege = {
							character_event = {
								id = 319991
							}
						}
					}
				}
			}
		}
	}	
}	
# Pillage Town (Large)
character_event = {
	id = 319922
	title = "EVTNAME319920"
	desc = "EVTDESC319920"
	picture = "GFX_evt_large_town_rain"

	min_age = 15
	only_rulers = yes
	
	is_triggered_only = yes
	
	trigger = { 
		siege = {
			is_attacker = yes
		}
		in_command = yes
		is_landed = yes
		NOT = {
			culture = dane
			ai = yes
		}
		FROM = { 
			holding_type = city 
			num_of_buildings = 13
			holder_scope = {
				NOT = { same_realm = ROOT }
				NOT = { character = ROOT }
			}
		}
	}
	
	option = {			# No Sacking
		name = "EVTOPTA319920"
		ai_chance = {
			factor = 1
			
			modifier = {
				factor = 1.50
				OR = {
					trait = charitable
					trait = honest
					trait = trusting 
					trait = content
					trait = scholar
				}
			}
			modifier = {
				factor = 3
				OR = {
					trait = kind
					trait = honorable
					trait = just
				}
			}
			modifier = {
				factor = 0.50
				OR = {
					trait = cruel
					trait = wroth
					trait = ruthless
					trait = impaler
				}
			}
			modifier = {
				factor = 0.75
				OR = {
					trait = ruthless
					trait = greedy
					trait = arbitrary
				}
			}
			modifier = {
				factor = 1.2
				piety = 500
			}
			modifier = {
				factor = 1.2
				piety = 1000
			}
			modifier = {
				factor = 5.0
				OR = {
					character = 3
					character = 14
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						culture_group = ROOT
					}
				}
			}
			modifier = {
				factor = 5
				FROM = {
					holder_scope = {
						culture = ROOT
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						religion_group = ROOT
					}
				}
			}
			modifier = {
				factor = 3
				FROM = {
					holder_scope = {
						religion = ROOT
					}
				}
			}
			modifier = {
				factor = 10.0
				OR = {
					has_nickname = nick_the_kind
					has_nickname = nick_the_good
					has_nickname = nick_the_magnanimous
					has_nickname = nick_the_merry
					has_nickname = nick_the_gentle
					has_nickname = nick_the_just
					has_nickname = nick_the_pious
					has_nickname = nick_the_apostle
					has_nickname = nick_the_blessed
					has_nickname = nick_the_monk
					has_nickname = nick_the_confessor
					has_nickname = nick_the_holy
					has_nickname = nick_the_martyr
					has_nickname = nick_the_liberator
				}
			}	
			
		}
		prestige = 10
		piety = 10
		if = {
			limit = {
				NOT = {
					OR = {
						trait = temperate
						trait = gluttonous
						trait = wroth
					}	
				}
			}
			random = {
				chance = 5
				add_trait = temperate
			}	
		}
#		if = {
#			limit = {
#				NOT = {
#					OR = {
#						trait = honorable
#						trait = cruel
#						trait = ruthless
#						trait = arbitrary
#					}	
#				}
#			}
#			random = {
#				chance = 5
#				add_trait = honorable
#			}	
#		}
		if = {
			limit = {
				trait = arbitrary
			}
			random = {
				chance = 30
				remove_trait = arbitrary
			}	
		}
	}
	option = {			# Loot (25 - 100)
		name = "EVTOPTB319920"
		ai_chance = {
			factor = 1
			
			modifier = {
				factor = 0.2
				location = { culture = ROOT }
			}
			modifier = {
				factor = 1.5
				OR = {
					trait = greedy
					trait = envious
					trait = arbitrary
					trait = slothful 
					trait = wroth
				}
			}
			modifier = {
				factor = 3
				culture = dane
			}
			modifier = {
				factor = 1.5
				OR = {
					trait = cruel
					trait = ruthless
				}
			}
			modifier = {
				factor = 0.8
				OR = {
					learning = 12
					diplomacy = 12
					stewardship = 12
				}
			}
			modifier = {
				factor = 0.8
				OR = {
					learning = 16
					diplomacy = 16
					stewardship = 16
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						NOT = { culture_group = ROOT }
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						NOT = { religion_group = ROOT }
					}
				}
			}
			modifier = {
				factor = 1.12
				NOT = {
					scaled_wealth = 0.75
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					trait = kind
					trait = honorable
					trait = just
				}
			}
		}	
		piety = -25
		custom_tooltip = { text = "EVTTT319900B" }
		hidden_tooltip = {
			random_list = {
				50 = { wealth = 0.1 }
				20 = {
					FROM = {
						destroy_random_building = yes
					}
				}
				20 = {
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
				}
				10 = {
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
				}
			}
		}	
		if = {
			limit = {
				trait = kind
			}
			random = {
				chance = 25
				remove_trait = kind
			}
		}
#		if = {
#			limit = {
#				trait = honorable
#			}
#			random = {
#				chance = 25
#				remove_trait = honorable
#			}
#		}
		random_list = {
			20 = {
				wealth = 12
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 12 }
							character_event = { id = 319981 }
						}
					}
				}
			}
			20 = {
				wealth = 17
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 17 }
							character_event = { id = 319981 }
						}
					}
				}
			}
			20 = {
				wealth = 25
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 25 }
							character_event = { id = 319981 }
						}
					}
				}
			}
			15 = {
				wealth = 32
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 32 }
							character_event = { id = 319981 }
						}
					}
				}
			}
			10 = {
				wealth = 37
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 37 }
							character_event = { id = 319981 }
						}
					}
				}
			}
			10 = {
				wealth = 43
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 43 }
							character_event = { id = 319981 }
						}
					}
				}
			}
			5 = {
				wealth = 50
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 50 }
							character_event = { id = 319981 }
						}
					}
				}
			}
		}
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			custom_tooltip = {
				text = from_province_loses_prosperity_custom_tooltip
				FROM = {
					location = {
						hidden_tooltip = {
							subtract_variable = { which = prosperity_value value = 3 }
						}
					}
				}
			}
		}
	}
	option = {			# Sack and Burn (14-35)
		name = "EVTOPTC319920"
		ai_chance = {
			factor = 1
			
			modifier = {
				factor = 0
				location = { culture = ROOT }
			}
			modifier = {
				factor = 0.5
				siege = {
					enemy = {
						leader = {
							ai = yes
						}
					}
				}
			}
			modifier = {
				factor = 1.25
				siege = {
					enemy = {
						leader = {
							ai = no
						}
					}
				}
			}
			modifier = {
				factor = 0.5
				siege = {
					enemy = {
						leader = {
							ai = no
							NOT = {
								demesne_size = 2
							}	
						}
					}
				}
			}
			modifier = {
				factor = 1.50
				OR = {
					trait = wroth
					trait = arbitrary
					trait = impaler
				}
			}
			modifier = {
				factor = 1.5
				OR = {
					trait = cruel
					trait = ruthless
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					trait = charitable
					trait = honest
					trait = trusting 
					trait = content
					trait = scholar
				}
			}
			modifier = {
				factor = 0.2
				OR = {
					trait = kind
					trait = honorable
					trait = just
				}
			}
			modifier = {
				factor = 0.8
				OR = {
					learning = 12
					diplomacy = 12
					stewardship = 12
				}
			}
			modifier = {
				factor = 0.8
				OR = {
					learning = 16
					diplomacy = 16
					stewardship = 16
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						NOT = { culture_group = ROOT }
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					holder_scope = {
						NOT = { religion_group = ROOT }
					}
				}
			}
			modifier = {
				factor = 0.25
				FROM = {
					holder_scope = {
						culture = ROOT
					}
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					holder_scope = {
						religion = ROOT
					}
				}
			}
			modifier = {
				factor = 1.5
				NOT = {
					scaled_wealth = 0.75
				}
			}
			modifier = {
				factor = 3.5
				OR = {
					has_nickname = nick_the_cruel
					has_nickname = nick_the_ill_ruler
					has_nickname = nick_the_terrible
				}
			}
			modifier = {
				factor = 1.75
				OR = {
					culture = pictish
					culture = oldirish
					culture = gaelic
				}
			}
			modifier = {
				factor = 1.5
				OR = {
					is_ingvaeonic_culture_trigger = yes
					culture = visigoth
					culture = ostrogoth
				}
			}	
			modifier = {
				factor = 0.35
				OR = {
					culture = armorican
					culture = romanobritish
					culture_group = imperiale
				}
			}
			modifier = {
				factor = 0.35
				OR = {
					culture = roman
					has_landed_title = e_gaul
					top_liege = { has_landed_title = e_gaul }
					has_landed_title = e_roman_britannia
					top_liege = { has_landed_title = e_roman_britannia }
				}
			}
		}	
		piety = -60
		custom_tooltip = { text = "EVTTT319900A" }
		if = {
			limit = {
				NOT = {
					OR = {
						trait = cruel
						trait = kind
					}
				}
			}
			random = {
				chance = 75
				add_trait = cruel
			}
		}
		if = {
			limit = {
				trait = kind
			}
			remove_trait = kind
		}
#		if = {
#			limit = {
#				trait = honorable
#			}
#			remove_trait = honorable
#		}
		if = {
			limit = {
				trait = just
			}
			random = {
				chance = 75
				remove_trait = just
			}
		}
		if = {
			limit = {
				NOT = {
					OR = {
						trait = honorable
						trait = cruel
						trait = ruthless
						trait = arbitrary
					}	
				}
			}	
			random = {
				chance = 50
				add_trait = ruthless
			}	
		}
		if = {
			limit = {
				trait = cruel
			}
			random = {
				chance = 10
				give_nickname = nick_the_raider
			}
		}
		random_list = {
			30 = {
				wealth = 10
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 10 }
						}
					}
				}
			}
			20 = {
				wealth = 14
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 14 }
						}
					}
				}
			}
			20 = {
				wealth = 18
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 18 }
						}
					}
				}
			}
			20 = {
				wealth = 21
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 21 }
						}
					}
				}
			}
			10 = {
				wealth = 24
				hidden_tooltip = {
					FROM = {
						holder_scope = {
							set_variable = { which = "looting_amount" value = 24 }
						}
					}
				}
			}	
		}
		hidden_tooltip = {
			random_list = {
				20 = {
					FROM = {
						destroy_random_building = yes
					}	
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
				}	
				20 = {
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
				}
				20 = {
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}	
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
				}
				20 = {
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}	
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
				}
				10 = {
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}	
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
				}
				10 = {
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}	
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
					FROM = {
						destroy_random_building = yes
					}
				}
			}	
		}	
		if = {
			limit = {
				has_dlc = "Reapers"
			}
			custom_tooltip = {
				text = from_province_loses_prosperity_custom_tooltip
				FROM = {
					location = {
						hidden_tooltip = {
							subtract_variable = { which = prosperity_value value = 6 }
						}
					}
				}
			}
		}
		hidden_tooltip = {
			if = {
				limit = {
					FROM = {
						holder_scope = {
							independent = yes
						}
					}
				}
				FROM = {
					holder_scope = {
						character_event = {
							id = 319991
						}
					}
				}
			}
			if = {
				limit = {
					FROM = {
						holder_scope = {
							independent = no
						}
					}
				}
				FROM = {
					holder_scope = {
						top_liege = {
							character_event = {
								id = 319991
							}
						}
					}
				}
			}
		}
	}	
}	






### NOTIFICATIONS ###

# Castle Looted - Notify Holder or Liege
character_event = {
	id = 319980
	title = "EVTNAME319980"
	desc = "EVTDESC319980"
	picture = "GFX_evt_siege"
	border = "GFX_event_normal_frame_war"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA319980"
		prestige = -10
		ROOT = {
			opinion = {
				modifier = opinion_looted_holding
				who = FROM
				years = 5
			}
			check_variable = { which = "looting_amount" value = -1 }
			wealth = looting_amount
		}
		ROOT = { 
			set_variable = { which = "looting_amount" value = 0 }
		}
	}
}
# Town Looted - Notify Holder or Liege
character_event = {
	id = 319981
	title = "EVTNAME319980"
	desc = "EVTDESC319981"
	picture = "GFX_evt_coastal_village"
	border = "GFX_event_normal_frame_war"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA319981"
		prestige = -10
		ROOT = {
			opinion = {
				modifier = opinion_looted_holding
				who = FROM
				years = 5
			}
			check_variable = { which = "looting_amount" value = -1 }
			wealth = looting_amount
		}
		ROOT = { 
			set_variable = { which = "looting_amount" value = 0 }
		}
	}
}


# Castle Sacked - Notify Holder or Liege
character_event = {
	id = 319990
	title = "EVTNAME319990"
	desc = "EVTDESC319990"
	picture = "GFX_evt_pillage_burn"
	border = "GFX_event_normal_frame_war"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA319990"
		prestige = -20
		ROOT = {
			opinion = {
				modifier = opinion_razed_holding
				who = FROM
				years = 10
			}
			check_variable = { which = "looting_amount" value = -1 }
			wealth = looting_amount
		}
		ROOT = { 
			set_variable = { which = "looting_amount" value = 0 }
		}
	}
}	
# Town Sacked - Notify Holder or Liege
character_event = {
	id = 319991
	title = "EVTNAME319990"
	desc = "EVTDESC319991"
	picture = "GFX_evt_pillage_burn"
	border = "GFX_event_normal_frame_war"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA319991"
		prestige = -20
		ROOT = {
			opinion = {
				modifier = opinion_razed_holding
				who = FROM
				years = 10
			}
			check_variable = { which = "looting_amount" value = -1 }
			wealth = looting_amount
		}
		ROOT = { 
			set_variable = { which = "looting_amount" value = 0 }
		}
	}
}	
	
	
	
	
	
### SIEGE PRISONERS ###

character_event = {			# Owner in Settlement
	id = 319950
	title = "EVTNAME319900"
	desc = "EVTDESC319950"
	picture = "GFX_evt_people_captured"

	is_triggered_only = yes

	trigger = {
		NOT = { any_liege = { has_landed_title = e_rebels } }
		FROM = {
			holder_scope = { 
				capital_holding = { 
					OR = {
						title = PREVPREV
						#controller = {
							#NOT = { character = PREVPREV }
						#}						
					}	
				}
				at_location = ROOT 
				war_with = ROOT
				OR = {
					is_primary_war_attacker = yes
					is_primary_war_defender = yes
				}
				NOT = { has_character_modifier = modifier_hidden }
			}
		}
	}
	
	immediate = {
		FROM = { 
			holder_scope = {
				any_dynasty_member = {  
					limit = {
						NOT = { character = ROOT }
						at_location = ROOT 
						NOT = { has_character_modifier = modifier_hidden }
						NOT = { in_command = yes } 
						NOT = { is_child_of = ROOT }	
						NOT = { father = { is_child_of = ROOT } }
						NOT = { mother = { is_child_of = ROOT } } 
					}
					random = {
						chance = 50
						set_character_flag = captured_by_@ROOT 
					}
				}
				any_spouse = {  
					limit = {
						NOT = { character = ROOT }
						at_location = ROOT 
						NOT = { has_character_modifier = modifier_hidden } 
						NOT = { is_child_of = ROOT }	
						NOT = { father = { is_child_of = ROOT } }
						NOT = { mother = { is_child_of = ROOT } } 
					}
					random = {
						chance = 50
						set_character_flag = captured_by_@ROOT 
					}
				}
			}			
		}
	}

	option = {
		name = "EVTOPTA319950"
		trigger = {
			liege = {
				FROM = { 
					holder_scope = { 
						OR = {
							war_with = ROOT 
							war_with = PREVPREV
						}	
					} 
				}
			}	
		}  

		ai_chance = {
			factor = 5
			modifier = {
				factor = 5  
				FROM = {
					holder_scope = {
						primary_title = {
							higher_tier_than = COUNT
						}
					}
				}
			}
			modifier = {
				factor = 3  
				FROM = {
					holder_scope = {
						primary_title = {
							higher_tier_than = DUKE
						}
					}
				}
			}
			modifier = {
				factor = 0.25  
				FROM = {
					holder_scope = {
						primary_title = {
							lower_tier_than = COUNT
						}
					}
				}
			}
			modifier = {
				factor = 2
				trait = cruel
			}
			modifier = {
				factor = 2
				trait = greedy
			}
			modifier = {
				factor = 2
				trait = ruthless
			}
			modifier = {
				factor = 10
				trait = impaler
			}
			modifier = {
				factor = 10
				trait = wroth
			}
			modifier = {
				factor = 0.25
				trait = charitable
			}
			modifier = {
				factor = 0.25
				trait = kind
			}
			modifier = {
				factor = 0.5
				trait = honorable
			}
			modifier = {
				factor = 0.5
				trait = weak
			}
			modifier = {
				factor = 0.5
				trait = just
			}
		}
		
		FROM = { 
			holder_scope = {
				if = {
					limit = { 
						at_location = ROOT
						NOT = { has_character_modifier = modifier_hidden }
						NOT = { character = ROOT }
					} 
				}
				set_character_flag = captured_in_battle
				if = {
					limit = { ROOT = { demesne_size = 1 } }
					imprison = ROOT 	
				}
				hidden_tooltip = { 
					if = {
						limit = { ROOT = { NOT = { demesne_size = 1 } } }
						ROOT = { liege = { character_event = { id = 3199501 } } }
					}
				}
				hidden_tooltip = { character_event = { id = 3199500 } }
			}
		}	
	}
		
	option = {
		name = "EVTOPTB319950"
		trigger = {
			liege = {
				FROM = { 
					holder_scope = { 
						OR = {
							war_with = ROOT 
							war_with = PREVPREV
						}	
						OR = {
							any_dynasty_member = {
								AND = {
									NOT = { character = ROOT }
									at_location = ROOT
									NOT = { character = PREV }
									NOT = { has_character_modifier = modifier_hidden }
									NOT = { in_command = yes }
									NOT = { is_child_of = ROOT }	
									NOT = { father = { is_child_of = ROOT } }
									NOT = { mother = { is_child_of = ROOT } } 
								}
							}
							any_spouse = {
								NOT = { character = ROOT }
								at_location = ROOT
								NOT = { has_character_modifier = modifier_hidden }
								NOT = { is_child_of = ROOT }	
								NOT = { father = { is_child_of = ROOT } }
								NOT = { mother = { is_child_of = ROOT } } 
							}
						}
					}
				} 
			}
		}
				
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0.1
				FROM = {
					holder_scope = {
						primary_title = { lower_tier_than = COUNT }
					}
				}
			}
			modifier = {
				factor = 5
				FROM = {
					holder_scope = { 
						any_dynasty_member = {
							primary_title = { higher_tier_than = COUNT }
						}
					}
				}
			}
			modifier = {
				factor = 5
				FROM = {
					holder_scope = { 
						any_dynasty_member = {
							primary_title = { higher_tier_than = DUKE }
						}
					}
				}
			}
			modifier = {
				factor = 8
				trait = cruel
			}
			modifier = {
				factor = 5
				trait = greedy
			}
			modifier = {
				factor = 5
				trait = ruthless
			}
			modifier = {
				factor = 0
				trait = kind
			}
			modifier = {
				factor = 0.25
				trait = charitable
			}
			modifier = {
				factor = 0.15
				trait = honorable
			}
			modifier = {
				factor = 15
				trait = impaler
			}
			modifier = {
				factor = 15
				trait = wroth
			}	
		}
		
		FROM = { 
			holder_scope = {
				any_dynasty_member = {
					limit = {
						has_character_flag = captured_by_@ROOT
					}
					set_character_flag = captured_in_battle 
					if = {
						limit = { ROOT = { demesne_size = 1 } }
						imprison = ROOT 	
					}
					hidden_tooltip = { character_event = { id = 3199500 } }
				}
				any_spouse = {  
					limit = {
						has_character_flag = captured_by_@ROOT 
					}	
					set_character_flag = captured_in_battle 
					if = {
						limit = { ROOT = { demesne_size = 1 } }
						imprison = ROOT 	
					}
					hidden_tooltip = { character_event = { id = 3199500 } }
				}
			}			
		}
		if = {
			limit = { ROOT = { NOT = { demesne_size = 1 } } }
			ROOT = { liege = { character_event = { id = 3199501 } } }
		}
	
		if = {
			limit = {
				ROOT = {
					trait = kind
				}
			}
			random = { 
				chance = 30
				remove_trait = kind
			}
		}	
		if = {
			limit = {
				ROOT = {
					NOT = { trait = kind }
					NOT = { trait = cruel }
				}
			}
			random = { 
				chance = 15
				add_trait = cruel
				hidden_tooltip = {
					character_event = { id = 38259 }
				}
			}
		}
	}
				 
	option = {
		name = "EVTOPTC319950"
		trigger = {
			liege = {
				FROM = { 
					holder_scope = { 
						OR = {
							war_with = ROOT 
							war_with = PREVPREV
						}	
					} 
				}
			}	
		} 
		ai_chance = {
			factor = 1
			modifier = {
				factor = 15
				trait = kind
			}
			modifier = {
				factor = 5
				trait = charitable
			}
			modifier = {
				factor = 5
				trait = honorable
			}
			modifier = {
				factor = 3
				trait = just
			}
			modifier = {
				factor = 2
				trait = weak
			}
			modifier = {
				factor = 3
				trait = humble
			}
			modifier = {
				factor = 0.5
				trait = wroth
			}
			modifier = {
				factor = 0.5
				trait = greedy
			}
			modifier = {
				factor = 0.5
				trait = impaler
			}
			modifier = {
				factor = 0.5
				trait = cruel
			}
			modifier = {
				factor = 0.5
				trait = ruthless
			}
			modifier = {
				factor = 0.5
				FROM = {
					holder_scope = { NOT = { religion = ROOT } }
				}
			}
			modifier = {
				factor = 3
				FROM = {
					holder_scope = { religion = ROOT }
				}
			}
			modifier = {
				factor = 3
				FROM = {
					holder_scope = { culture_group = ROOT }
				}
			}
			modifier = {
				factor = 3
				FROM = {
					holder_scope = { culture = ROOT }
				}
			}
		}
		
		FROM = { 
			holder_scope = {
				any_dynasty_member = {  
					limit = {
						has_character_flag = captured_by_@ROOT
					}		
					opinion = {
						who = ROOT
						modifier = opinion_relieved
						months = 12
					}
				}
				any_spouse = {  
					limit = {
						has_character_flag = captured_by_@ROOT
					}	
					opinion = {
						who = ROOT
						modifier = opinion_relieved
						months = 12
					}
				}
			}
		}
	}
	
	after = {
		FROM = { 
			holder_scope = {
				any_dynasty_member = {
					limit = { has_character_flag = captured_by_@ROOT }
					clr_character_flag = captured_by_@ROOT
				}
				any_spouse = {
					limit = { has_character_flag = captured_by_@ROOT }
					clr_character_flag = captured_by_@ROOT
				}
			}			
		}
	}
}

character_event = {			# Owner NOT in Settlement
	id = 319951
	title = "EVTNAME319900"
	desc = "EVTDESC319951"
	picture = "GFX_evt_people_captured"

	is_triggered_only = yes
	
	trigger = {
		NOT = { any_liege = { has_landed_title = e_rebels } }
		FROM = { 
			holder_scope = {
				capital_holding = { 
					OR = {
						title = PREVPREV
						#controller = {
							#NOT = { character = PREVPREV }
						#}						
					}	
				}
				war_with = ROOT
				OR = {
					NOT = { at_location = ROOT }	
					has_character_modifier = modifier_hidden
				}
				OR = {
					is_primary_war_attacker = yes
					is_primary_war_defender = yes
				}
				OR = {
					FROM = { 
						holder_scope = {
							any_dynasty_member = {
								AND = {
									NOT = { character = ROOT }
									NOT = { character = ROOT }
									NOT = { character = PREV }
									at_location = ROOT
									NOT = { has_character_modifier = modifier_hidden }
									NOT = { in_command = yes }
									NOT = { is_child_of = ROOT }	
									NOT = { father = { is_child_of = ROOT } }
									NOT = { mother = { is_child_of = ROOT } } 
								}
							} 
						}
					}
					FROM = { 
						holder_scope = {
							any_spouse = {
								AND = {
									NOT = { character = ROOT }
									at_location = ROOT
									NOT = { has_character_modifier = modifier_hidden }
								}
							}
						}
					}
				}
			}
		}
	}

	immediate = {
		FROM = { 
			holder_scope = {
				any_dynasty_member = {  
					limit = {
						NOT = { character = ROOT }
						at_location = ROOT 
						NOT = { has_character_modifier = modifier_hidden }
						NOT = { in_command = yes } 
						NOT = { is_child_of = ROOT }	
						NOT = { father = { is_child_of = ROOT } }
						NOT = { mother = { is_child_of = ROOT } } 
					}
					random = {
						chance = 50
						set_character_flag = captured_by_@ROOT 
					}
				}
				any_spouse = {  
					limit = {
						NOT = { character = ROOT }
						at_location = ROOT 
						NOT = { has_character_modifier = modifier_hidden } 
						NOT = { is_child_of = ROOT }	
						NOT = { father = { is_child_of = ROOT } }
						NOT = { mother = { is_child_of = ROOT } } 
					}
					random = {
						chance = 50
						set_character_flag = captured_by_@ROOT 
					}
				}
			}			
		}
	}
	
	option = { 
		name = "EVTOPTA319951"
		trigger = {
			liege = {
				FROM = { 
					holder_scope = { 
						OR = {
							war_with = ROOT 
							war_with = PREVPREV
						}	
					} 
				}
			}	
		}

		ai_chance = {
			factor = 1
			modifier = {
				factor = 10
				trait = kind
			}
			modifier = {
				factor = 5
				trait = just
			}
			modifier = {
				factor = 0.5
				trait = greedy
			}
			modifier = {
				factor = 5
				trait = honorable
			}
			modifier = {
				factor = 3
				trait = charitable
			}
			modifier = {
				factor = 0.25
				trait = impaler
			}
			modifier = {
				factor = 0.5
				trait = cruel
			}
			modifier = {
				factor = 0.5
				trait = wroth
			}
		}

		FROM = { 
			holder_scope = {
				any_dynasty_member = {
					limit = {
						has_character_flag = captured_by_@ROOT
					}
					opinion = {
						who = ROOT
						modifier = opinion_relieved
						months = 12
					}
				}
				any_spouse = {
					limit = {
						has_character_flag = captured_by_@ROOT
					}
					opinion = {
						who = ROOT
						modifier = opinion_relieved
						months = 12
					}
				}
			}
		}
	}	

	option = {
		name = "EVTOPTB319951"
		trigger = {
			liege = {
				FROM = { 
					holder_scope = { 
						OR = {
							war_with = ROOT 
							war_with = PREVPREV
						}
						OR = {
							any_dynasty_member = {
								AND = {
									NOT = { character = ROOT }
									NOT = { character = ROOT }
									NOT = { character = PREV }
									at_location = ROOT
									NOT = { has_character_modifier = modifier_hidden }
									NOT = { in_command = yes }
									NOT = { is_child_of = ROOT }	
									NOT = { father = { is_child_of = ROOT } }
									NOT = { mother = { is_child_of = ROOT } } 
								}
							} 
							any_spouse = {
								AND = {
									NOT = { character = ROOT }
									at_location = ROOT
									NOT = { has_character_modifier = modifier_hidden }
								}
							}
						}
					} 
				}
			}	
		}
		
		ai_chance = {
			factor = 0.1
			modifier = {
				factor = 10
				FROM = {
					holder_scope = { 
						any_dynasty_member = {
							primary_title = { higher_tier_than = count }
						}
					}
				}
			}			
			modifier = {
				factor = 10
				trait = cruel
			}
			modifier = {
				factor = 3
				trait = greedy
			}
			modifier = {
				factor = 5
				trait = ruthless
			}
			modifier = {
				factor = 10
				trait = impaler
				}
			modifier = {
				factor = 0.25
				trait = kind
			}
			modifier = {
				factor = 0.5
				trait = charitable
			}
			modifier = {
				factor = 0.5
				trait = honorable
			}
			modifier = {
				factor = 0.5
				trait = weak
			}
		}
		
		FROM = { 
			holder_scope = {
				any_dynasty_member = {
					limit = {
						has_character_flag = captured_by_@ROOT
					}
					set_character_flag = captured_in_battle 
					if = {
						limit = { ROOT = { demesne_size = 1 } }
						imprison = ROOT 	
					}
					hidden_tooltip = { character_event = { id = 3199500 } } #Inform
				}
				any_spouse = {
					limit = {
						has_character_flag = captured_by_@ROOT
					}
					set_character_flag = captured_in_battle 
					if = {
						limit = { ROOT = { demesne_size = 1 } }
						imprison = ROOT 	
					}
					hidden_tooltip = { character_event = { id = 3199500 } } #Inform
				}
			}			
		}
		if = {
			limit = { ROOT = { NOT = { demesne_size = 1 } } }
			ROOT = { liege = { character_event = { id = 3199501 } } }
		}
	
		if = {
			limit = {
				ROOT = {
					trait = kind
				}
			}
			random = { 
				chance = 30
				remove_trait = kind
			}
		}	
		if = {
			limit = {
				ROOT = {
					NOT = { trait = kind }
					NOT = { trait = cruel }
				}
			}
			random = { 
				chance = 15
				add_trait = cruel
				hidden_tooltip = {
					character_event = { id = 38259 }
				}
			}
		}
	}
	
	after = {
		FROM = { 
			holder_scope = {
				any_dynasty_member = {
					limit = { has_character_flag = captured_by_@ROOT }
					clr_character_flag = captured_by_@ROOT
				}
				any_spouse = {
					limit = { has_character_flag = captured_by_@ROOT }
					clr_character_flag = captured_by_@ROOT
				}
			}			
		}
	}
}	
character_event = {			# Release Previous Prisoners
	id = 319952
	title = "EVTNAME319900"
	desc = "EVTDESC319952"
	picture = "GFX_evt_into_the_dungeon"

	is_triggered_only = yes
		
	trigger = { 
		FROM = { 
			holder_scope = { 
				war_with = ROOT 
				any_courtier = { 
					prisoner = yes 
					at_location = ROOT
				} 
			} 
		} 
	} 						
						
	option = {
		name = "EVTOPTA319952"
		trigger = { 
			FROM = { 
				holder_scope = { 
					war_with = ROOT 
					any_courtier = { 
						prisoner = yes 
						at_location = ROOT
					} 
				} 
			}
		}
		
		ai_chance = { 
			factor = 1
			modifier = {
				factor = 3
				trait = kind
			}
			modifier = {
				factor = 3
				trait = trusting
			}
			modifier = {
				factor = 0.25
				trait = cruel
			}
			modifier = {
				factor = 0.1
				trait = impaler
			}
			modifier = {
				factor = 3
				trait = charitable
			}
			modifier = {
				factor = 0.5
				trait = wroth
			}
			modifier = {
				factor = 0.25
				trait = ruthless
			}
			modifier = {
				factor = 2
				trait = honorable
			}
			modifier = {
				factor = 0.5
				trait = paranoid
			}   
		}
		
		if = {
			limit = {
				ROOT = {
					trait = cruel
				}
			}
			random = { 
				chance = 30
				remove_trait = cruel
			}
		}	
		if = {
			limit = {
				ROOT = {
					NOT = { trait = kind }
					NOT = { trait = cruel }
				}
			}
			random = { 
				chance = 15
				add_trait = kind
			}
		}
		
		FROM = { 
			holder_scope = {
				any_courtier = {	
					limit = { 
						at_location = ROOT
						prisoner = yes 
					}
					prisoner = no
				}
			}
		}
	}

	option = {
		name = "EVTOPTB319952"
		trigger = { 
			FROM = { 
				holder_scope = { 
					war_with = ROOT 
					any_courtier = { war_with = PREV }
				} 
			}
		}

		ai_chance = { 
			factor = 2 
			modifier = {
				factor = 2
				trait = kind
			}
			modifier = {
				factor = 2
				trait = trusting
			}
			modifier = {
				factor = 2
				trait = just
			}
			modifier = {
				factor = 0.5
				trait = cruel
			}
			modifier = {
				factor = 0.5
				trait = wroth
			}
			modifier = {
				factor = 3
				trait = honorable
			}
			modifier = {
				factor = 0.5
				trait = paranoid
			}
			modifier = {
				factor = 1.5
				trait = craven
			}
		}
		
		if = {
			limit = {
				ROOT = {
					trait = arbitrary
				}
			}
			remove_trait = arbitrary
		}
		
#		if = {
#			limit = {
#				ROOT = {
#					NOT = { trait = arbitrary }
#					NOT = { trait = cruel }
#					NOT = { trait = ruthless }
#					NOT = { trait = honorable }
#				}
#			}
#			random = { 
#				chance = 25
#				add_trait = honorable
#			}
#		}
		
		FROM = { 
			holder_scope = {
				any_courtier = {	
					limit = { 
						prisoner = yes 
						war_with = PREV
					}
					prisoner = no
				}
			}
		}
	}
	
	option = {
		name = "EVTOPTC319952"
		trigger = { 
			FROM = { 
				holder_scope = { 
					war_with = ROOT 
					any_courtier = {
						prisoner = yes
					}
				}
			}
			OR = {
				ROOT = { 
					any_dynasty_member = {
						at_location = ROOT
						prisoner = yes 
					}
				}
				ROOT = { 
					any_spouse = {
						at_location = ROOT
						prisoner = yes 
					}
				}
			}
		}
 	
		ai_chance = { 
			factor = 1
			modifier = {
				factor = 0.9
				trait = kind
			}
			modifier = {
				factor = 0.9
				trait = trusting
			}
			modifier = {
				factor = 1.5
				trait = just
				}
			modifier = {
				factor = 1.5
				trait = cruel
			}
			modifier = {
				factor = 1.5
				trait = wroth
			}
			modifier = {
				factor = 1.5
				trait = ruthless
			}
			modifier = {
				factor = 5
				trait = familyperson
			}
			modifier = {
				factor = 2
				trait = cynical
			}
			modifier = {
				factor = 2
				trait = paranoid
			}
			modifier = {
				factor = 3
				trait = craven
			}
		}
		
		if = {
			limit = {
				ROOT = {
					trait = kind
				}
			}
			random = { 
				chance = 15
				remove_trait = kind
			}
		}	
		if = {
			limit = {
				ROOT = {
					NOT = { trait = ruthless }
					NOT = { trait = kind }
				}
			}
			random = { 
				chance = 10
				add_trait = ruthless
			}
		}
	
		ROOT = { 
			any_dynasty_member = {
				limit = { 
					prisoner = yes 
					at_location = ROOT
				}
				prisoner = no
			}
			any_spouse = {
				limit = { 
					prisoner = yes 
					at_location = ROOT
				}
				prisoner = no
			}
		}
	}
			
	option = {
		name = "EVTOPTD319952"
		trigger = { 
			FROM = { 
				holder_scope = { 
					war_with = ROOT 
					any_courtier = { prisoner = yes }
				}
			}
		}
		
		ai_chance = { 
			factor = 0.05 
			modifier = {
				factor = 0.1
				trait = kind
			}
			modifier = {
				factor = 0.1
				trait = honorable
			}
			modifier = {
				factor = 0.1
				trait = charitable
			}
			modifier = {
				factor = 0.25
				trait = just
			}
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 10
				trait = cruel
			}
			modifier = {
				factor = 3
				trait = wroth
			}
			modifier = {
				factor = 10
				trait = impaler
			}
			modifier = {
				factor = 5
				trait = envious
			}
			modifier = {
				factor = 10
				trait = paranoid
			} 
		}
		
		if = {
			limit = {
				ROOT = {
					trait = kind
				}
			}
			remove_trait = kind
		}
		if = {
			limit = {
				ROOT = {
					trait = charitable
				}
			}
			remove_trait = charitable
		}
		if = {
			limit = {
				ROOT = {
					NOT = { trait = cruel }
				}
			}
			random = { 
				chance = 25
				add_trait = cruel
			}
		}
		
		FROM = { 
			holder_scope = {
				any_courtier = {	
					limit = { 
						at_location = ROOT
						prisoner = yes 
					}
					opinion = {
						who = ROOT
						modifier = opinion_left_to_rot
						months = 60
					}
				}
			}
		}
	}
}

# Liege Takes Prisoners
character_event = {
	id = 3199501
	desc = "EVTDESC3199501"
	picture = "GFX_evt_people_captured"
	border = GFX_event_normal_frame_war

	is_triggered_only = yes
		
	option = {
		name = "EVTOPTA3199501"
		FROM = {
			FROM = { 
				holder_scope = {
					if = {
						limit = { 
							NOT = { character = ROOT }
							NOT = { has_character_modifier = modifier_hidden }
							prisoner = no
							has_character_flag = captured_in_battle	
						}  
						imprison = ROOT 		
					}
					any_dynasty_member = {
						limit = {
							NOT = { character = ROOT }
							NOT = { has_character_modifier = modifier_hidden }
							prisoner = no
							NOT = { character = PREV }
							has_character_flag = captured_in_battle
						}
						imprison = ROOT 
					}
					any_spouse = {
						limit = { 
							NOT = { character = ROOT }
							NOT = { has_character_modifier = modifier_hidden }
							prisoner = no
							NOT = { character = PREV }
							has_character_flag = captured_in_battle		
						}
						imprison = ROOT 
					}
					any_courtier = {
						limit = { 
							NOT = { character = ROOT }
							NOT = { has_character_modifier = modifier_hidden }
							prisoner = no
							NOT = { character = PREV }
							has_character_flag = captured_in_battle	
						}
						imprison = ROOT 
					}					
				}		
			}
		}
	}
}
# Inform Taken Prisoner
character_event = {
	id = 3199500
	desc = "EVTDESC3199500"
	picture = "GFX_evt_dungeon"
	border = GFX_event_normal_frame_war
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA3199500"
	}
}

### ENEMY APPROACHING ###	

# Option to stand, send family away or hide
character_event = {
	id = 319960
	desc = "EVTDESC319960"
	title = "EVTNAME319960"
	picture = "GFX_evt_riders_hill_storm"
	border = "GFX_event_normal_frame_war"

	is_triggered_only = yes

	trigger = { 
		NOT = { has_character_modifier = stalwart_defender }
		NOT = { has_character_modifier = modifier_hidden }
		OR = {
			location = { is_capital = yes }
			any_courtier = { at_location = FROM }
		}
		at_location = FROM
		siege = {
			is_attacker = no
		}
	}
	
	weight_multiplier = {
		days = 1
		modifier = {
			factor = 1000
			always = yes
		}
	}
	
	option = {
		name = "EVTOPTA319960"
		
		ai_chance = { 
			factor = 0.5 
			modifier = {
				factor = 3
				trait = slothful
			}
			modifier = {
				factor = 0.5
				trait = deceitful
			}
			modifier = {
				factor = 1.5
				trait = honest
			}
			modifier = {
				factor = 3
				trait = trusting
			}
			modifier = {
				factor = 0.5
				trait = paranoid
			}
			modifier = {
				factor = 2
				trait = proud
			}
			modifier = {
				factor = 2
				trait = brave
			}
			modifier = {
				factor = 2
				trait = strong
			}
			modifier = {
				factor = 0.5
				trait = weak
			}
			modifier = {
				factor = 0.5
				trait = humble
			}
			modifier = {
				factor = 2
				trait = honorable
			}
			modifier = {
				factor = 0.5
				NOT = { martial = 10 }
			}
			modifier = {
				factor = 2
				martial = 14
			}
			modifier = {
				factor = 2
				martial = 18
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
			modifier = {
				factor = 0.5
				is_tribal = yes
			}
		}
		
		if = {
			limit = {
				trait = in_hiding
			}
			remove_trait = in_hiding
		}
		
		add_character_modifier = {
			name = stalwart_defender
			duration = 365
		}
		
#		if = {
#			limit = {
#				NOT = { trait = craven }
#				NOT = { trait = honorable }
#				NOT = { trait = selfish }
#				NOT = { trait = humble }
#				NOT = { trait = cruel }
#				NOT = { trait = arbitrary }
#				NOT = { trait = impaler }
#				NOT = { trait = greedy }
#				NOT = { trait = deceitful }
#				NOT = { trait = trusting }
#				NOT = { trait = paranoid }
#				age = 20
#				martial = 12
#				diplomacy = 8
#			}
#			add_trait = honorable
#		}
		if = {
			limit = {
				trait = paranoid
			}
			remove_trait = paranoid
		}
		if = {
			limit = {
				NOT = { trait = brave }
				NOT = { trait = craven }
				trait = honorable
				NOT = { martial = 16 }
			}
			add_trait = brave
		}
		if = {
			limit = {
				trait = craven
				NOT = { trait = honorable }
			}
			random = {
				chance = 75
				remove_trait = craven
			}
		}
		
		hidden_tooltip = {
			ROOT = {
				remove_character_modifier = modifier_hidden
				any_dynasty_member = {
					limit = { 
						at_location = ROOT 
						NOT = { character = ROOT }
					}
					remove_character_modifier = modifier_hidden
				}
				any_spouse = {								
					limit = { 
						at_location = ROOT 
					}
					remove_character_modifier = modifier_hidden
				}
			}
		}
	}

	option = {
		name = "EVTOPTB319960"
		trigger = {
			any_dynasty_member = { 
				at_location = ROOT
				NOT = { has_character_modifier = modifier_hidden }
			}
		}
		
		ai_chance = { 
			factor = 1
			modifier = {
				factor = 5
				trait = diligent
			}
			modifier = {
				factor = 3
				trait = just
			}
			modifier = {
				factor = 2
				trait = brave
			}
			modifier = {
				factor = 3
				trait = honorable
			}
			modifier = {
				factor = 3
				trait = familyperson
			}
			modifier = {
				factor = 2
				intrigue = 12
			}
			modifier = {
				factor = 2
				intrigue = 16
			}
			modifier = {
				factor = 0.75
				is_tribal = yes
			}
		}

		custom_tooltip = { text = "TOOLTIP319960" }
		
		if = {
			limit = {
				trait = in_hiding
			}
			remove_trait = in_hiding
		}
		
		add_character_modifier = {
			name = stalwart_defender
			duration = 365
		}
		
		if = {
			limit = {
				trait = slothful
			}
			remove_trait = slothful
		}
		if = {
			limit = {
				trait = arbitrary
			}
			remove_trait = arbitrary
		}
#		if = {
#			limit = {
#				NOT = { trait = arbitrary }
#				NOT = { trait = slothful }
#				NOT = { trait = honorable }
#			}
#			random = {
#				chance = 25
#				add_trait = honorable
#			}
#		}
		
		hidden_tooltip = {
			any_dynasty_member = {
				limit = { 
					at_location = ROOT 
					NOT = { character = ROOT }
				}
				add_character_modifier = {
					name = modifier_hidden
					duration = 365
				}
				if = {
					limit = {
						trait = in_hiding
					}
					remove_trait = in_hiding
				}
			}
			any_spouse = {								
				limit = { 
					at_location = ROOT 
				}
				add_character_modifier = {
					name = modifier_hidden
					duration = 365
				}
				if = {
					limit = {
						trait = in_hiding
					}
					remove_trait = in_hiding
				}
			}
		}
	}
	
	option = {
		name = "EVTOPTC319960"
		
		ai_chance = { 
			factor = 0.25 
			modifier = {
				factor = 20
				trait = craven
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 2
				trait = weak
			}
			modifier = {
				factor = 3
				trait = selfish
			}
			modifier = {
				factor = 2
				trait = paranoid
			}
			modifier = {
				factor = 2
				NOT = { martial = 10 }
			}
			modifier = {
				factor = 2
				intrigue = 12
			}
			modifier = {
				factor = 2
				intrigue = 16
			}
			modifier = {
				factor = 0.5
				trait = proud
			}
			modifier = {
				factor = 0.5
				culture_group = germanic
			}
			modifier = {
				factor = 0.5
				trait = trusting
			}
			modifier = {
				factor = 2
				trait = diligent
			}
			modifier = {
				factor = 2
				trait = deceitful
			}
			modifier = {
				factor = 0.5
				trait = honest
			}
			modifier = {
				factor = 3
				is_tribal = yes
			}
		}
				
		custom_tooltip = { text = "TOOLTIP319960" }
		
		if = {
			limit = {
				trait = in_hiding
			}
			remove_trait = in_hiding
		}
		
		add_character_modifier = {
			name = modifier_hidden
			duration = 365
		}
		
		if = {
			limit = {
				trait = brave
			}
			random = {
				chance = 50
				modifier = {
					factor = 0.2
					is_tribal = yes
				}
				remove_trait = brave
			}
		}
#		if = {
#			limit = {
#				trait = honorable
#			}
#			remove_trait = honorable
#		}
		if = {
			limit = {
				NOT = { trait = brave }
				NOT = { trait = craven }
				NOT = { trait = honorable }
			}
			random = {
				chance = 25
				modifier = {
					factor = 0.2
					is_tribal = yes
				}
				add_trait = craven
			}
		}
		
		hidden_tooltip = {
			any_dynasty_member = {
				limit = { at_location = ROOT }
				add_character_modifier = {
					name = modifier_hidden
					duration = 365
				}
				if = {
					limit = {
						trait = in_hiding
					}
					remove_trait = in_hiding
				}
			}
			any_spouse = {								
				limit = { 
					at_location = ROOT 
				}
				add_character_modifier = {
					name = modifier_hidden
					duration = 365
				}
				if = {
					limit = {
						trait = in_hiding
					}
					remove_trait = in_hiding
				}
			}	
		}
	}
}

